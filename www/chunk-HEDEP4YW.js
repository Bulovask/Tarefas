import{$ as p3,E as Q4,F as G4,G as X4,H as J4,I as Z4,J as o3,K as t3,L as n3,M as a3,N as i3,Q as s3,S as e3,T as l3,U as c3,V as r3,W as v3,X as h3,Y as g3,Z as w3,_ as d3,a as e1,aa as m3,b as l1,ba as u3,c as a1,ca as x3,d as E4,da as f3,e as D4,ea as M3,f as z2,fa as k3,g as g1,h as N0,ha as z3,i as $,ia as y3,j as G,ja as B3,k as $1,ka as L3,l as y2,la as C3,m as w1,ma as H3,n as f1,o as I4,p as F4,q as K4,r as d1,s as U0,t as R4,u as N4,v as U4,w as W4,x as $4,y as Y4}from"./chunk-W5GDXR2L.js";import"./chunk-3OTR7FT5.js";import"./chunk-ILOS2IW7.js";import"./chunk-FBCY6IME.js";import"./chunk-6CTLD5LQ.js";import"./chunk-XW3MSMGP.js";import"./chunk-KVP5425T.js";import"./chunk-4U6PRYVA.js";import"./chunk-NDXL6NHI.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{e as z6,f as y6,h as B1}from"./chunk-LNJ3S2LQ.js";var O3=z6((Y0,Q0)=>{"use strict";(function(j,V){typeof Y0=="object"&&typeof Q0<"u"?Q0.exports=V():typeof define=="function"&&define.amd?define(V):(j=typeof globalThis<"u"?globalThis:j||self).Dexie=V()})(Y0,function(){"use strict";var j=function(o,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])})(o,t)},V=function(){return(V=Object.assign||function(o){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o}).apply(this,arguments)};function K(o,t,n){if(n||arguments.length===2)for(var a,i=0,s=t.length;i<s;i++)!a&&i in t||((a=a||Array.prototype.slice.call(t,0,i))[i]=t[i]);return o.concat(a||Array.prototype.slice.call(t))}var A=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O=Object.keys,q=Array.isArray;function N(o,t){return typeof t!="object"||O(t).forEach(function(n){o[n]=t[n]}),o}typeof Promise>"u"||A.Promise||(A.Promise=Promise);var i1=Object.getPrototypeOf,a0={}.hasOwnProperty;function s1(o,t){return a0.call(o,t)}function Y1(o,t){typeof t=="function"&&(t=t(i1(o))),(typeof Reflect>"u"?O:Reflect.ownKeys)(t).forEach(function(n){C1(o,n,t[n])})}var X0=Object.defineProperty;function C1(o,t,n,a){X0(o,t,N(n&&s1(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function Q1(o){return{from:function(t){return o.prototype=Object.create(t.prototype),C1(o.prototype,"constructor",o),{extend:Y1.bind(null,o.prototype)}}}}var D3=Object.getOwnPropertyDescriptor,I3=[].slice;function L2(o,t,n){return I3.call(o,t,n)}function J0(o,t){return t(o)}function e2(o){if(!o)throw new Error("Assertion Failed")}function Z0(o){A.setImmediate?setImmediate(o):setTimeout(o,0)}function M1(o,t){if(typeof t=="string"&&s1(o,t))return o[t];if(!t)return o;if(typeof t!="string"){for(var n=[],a=0,i=t.length;a<i;++a){var s=M1(o,t[a]);n.push(s)}return n}var e=t.indexOf(".");if(e!==-1){var l=o[t.substr(0,e)];return l==null?void 0:M1(l,t.substr(e+1))}}function c1(o,t,n){if(o&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof t!="string"&&"length"in t){e2(typeof n!="string"&&"length"in n);for(var a=0,i=t.length;a<i;++a)c1(o,t[a],n[a])}else{var s,e,l=t.indexOf(".");l!==-1?(s=t.substr(0,l),(e=t.substr(l+1))===""?n===void 0?q(o)&&!isNaN(parseInt(s))?o.splice(s,1):delete o[s]:o[s]=n:c1(l=!(l=o[s])||!s1(o,s)?o[s]={}:l,e,n)):n===void 0?q(o)&&!isNaN(parseInt(t))?o.splice(t,1):delete o[t]:o[t]=n}}function o4(o){var t,n={};for(t in o)s1(o,t)&&(n[t]=o[t]);return n}var F3=[].concat;function t4(o){return F3.apply([],o)}var P1="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(t4([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(t){return t+o+"Array"})}))).filter(function(o){return A[o]}),n4=new Set(P1.map(function(o){return A[o]})),l2=null;function _1(o){return l2=new WeakMap,o=function t(n){if(!n||typeof n!="object")return n;var a=l2.get(n);if(a)return a;if(q(n)){a=[],l2.set(n,a);for(var i=0,s=n.length;i<s;++i)a.push(t(n[i]))}else if(n4.has(n.constructor))a=n;else{var e,l=i1(n);for(e in a=l===Object.prototype?{}:Object.create(l),l2.set(n,a),n)s1(n,e)&&(a[e]=t(n[e]))}return a}(o),l2=null,o}var K3={}.toString;function i0(o){return K3.call(o).slice(8,-1)}var s0=typeof Symbol<"u"?Symbol.iterator:"@@iterator",R3=typeof s0=="symbol"?function(o){var t;return o!=null&&(t=o[s0])&&t.apply(o)}:function(){return null};function q1(o,t){return t=o.indexOf(t),0<=t&&o.splice(t,1),0<=t}var G1={};function k1(o){var t,n,a,i;if(arguments.length===1){if(q(o))return o.slice();if(this===G1&&typeof o=="string")return[o];if(i=R3(o)){for(n=[];!(a=i.next()).done;)n.push(a.value);return n}if(o==null)return[o];if(typeof(t=o.length)!="number")return[o];for(n=new Array(t);t--;)n[t]=o[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var e0=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},v2=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],h1=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(v2),N3={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function X1(o,t){this.name=o,this.message=t}function a4(o,t){return o+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,i){return i.indexOf(n)===a}).join(`
`)}function C2(o,t,n,a){this.failures=t,this.failedKeys=a,this.successCount=n,this.message=a4(o,t)}function J1(o,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=a4(o,this.failures)}Q1(X1).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Q1(C2).from(X1),Q1(J1).from(X1);var l0=h1.reduce(function(o,t){return o[t]=t+"Error",o},{}),U3=X1,_=h1.reduce(function(o,t){var n=t+"Error";function a(i,s){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=N3[t]||n,this.inner=null)}return Q1(a).from(U3),o[t]=a,o},{});_.Syntax=SyntaxError,_.Type=TypeError,_.Range=RangeError;var i4=v2.reduce(function(o,t){return o[t+"Error"]=_[t],o},{}),H2=h1.reduce(function(o,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(o[t+"Error"]=_[t]),o},{});function R(){}function c2(o){return o}function W3(o,t){return o==null||o===c2?t:function(n){return t(o(n))}}function T1(o,t){return function(){o.apply(this,arguments),t.apply(this,arguments)}}function $3(o,t){return o===R?t:function(){var n=o.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?T1(a,this.onsuccess):a),i&&(this.onerror=this.onerror?T1(i,this.onerror):i),s!==void 0?s:n}}function Y3(o,t){return o===R?t:function(){o.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?T1(n,this.onsuccess):n),a&&(this.onerror=this.onerror?T1(a,this.onerror):a)}}function Q3(o,t){return o===R?t:function(n){var a=o.apply(this,arguments);N(n,a);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?T1(i,this.onsuccess):i),s&&(this.onerror=this.onerror?T1(s,this.onerror):s),a===void 0?n===void 0?void 0:n:N(a,n)}}function G3(o,t){return o===R?t:function(){return t.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function c0(o,t){return o===R?t:function(){var n=o.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(a,s)})}return t.apply(this,arguments)}}H2.ModifyError=C2,H2.DexieError=X1,H2.BulkError=J1;var m1=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function s4(o){m1=o}var r2={},e4=100,P1=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,i1(o),o];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,i1(t),o]}(),v2=P1[0],h1=P1[1],P1=P1[2],h1=h1&&h1.then,E1=v2&&v2.constructor,r0=!!P1,h2=function(o,t){g2.push([o,t]),V2&&(queueMicrotask(J3),V2=!1)},v0=!0,V2=!0,D1=[],A2=[],h0=c2,H1={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:R,pgp:!1,env:{},finalize:R},S=H1,g2=[],I1=0,b2=[];function H(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=S;if(typeof o!="function"){if(o!==r2)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&w0(this,this._value))}this._state=null,this._value=null,++t.ref,function n(a,i){try{i(function(s){if(a._state===null){if(s===a)throw new TypeError("A promise cannot be resolved with itself.");var e=a._lib&&Z1();s&&typeof s.then=="function"?n(a,function(l,r){s instanceof H?s._then(l,r):s.then(l,r)}):(a._state=!0,a._value=s,c4(a)),e&&o2()}},w0.bind(null,a))}catch(s){w0(a,s)}}(this,o)}var g0={get:function(){var o=S,t=_2;function n(a,i){var s=this,e=!o.global&&(o!==S||t!==_2),l=e&&!A1(),r=new H(function(h,d){d0(s,new l4(v4(a,o,e,l),v4(i,o,e,l),h,d,o))});return this._consoleTask&&(r._consoleTask=this._consoleTask),r}return n.prototype=r2,n},set:function(o){C1(this,"then",o&&o.prototype===r2?g0:{get:function(){return o},set:g0.set})}};function l4(o,t,n,a,i){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=i}function w0(o,t){var n,a;A2.push(t),o._state===null&&(n=o._lib&&Z1(),t=h0(t),o._state=!1,o._value=t,a=o,D1.some(function(i){return i._value===a._value})||D1.push(a),c4(o),n&&o2())}function c4(o){var t=o._listeners;o._listeners=[];for(var n=0,a=t.length;n<a;++n)d0(o,t[n]);var i=o._PSD;--i.ref||i.finalize(),I1===0&&(++I1,h2(function(){--I1==0&&p0()},[]))}function d0(o,t){if(o._state!==null){var n=o._state?t.onFulfilled:t.onRejected;if(n===null)return(o._state?t.resolve:t.reject)(o._value);++t.psd.ref,++I1,h2(X3,[n,o,t])}else o._listeners.push(t)}function X3(o,t,n){try{var a,i=t._value;!t._state&&A2.length&&(A2=[]),a=m1&&t._consoleTask?t._consoleTask.run(function(){return o(i)}):o(i),t._state||A2.indexOf(i)!==-1||function(s){for(var e=D1.length;e;)if(D1[--e]._value===s._value)return D1.splice(e,1)}(t),n.resolve(a)}catch(s){n.reject(s)}finally{--I1==0&&p0(),--n.psd.ref||n.psd.finalize()}}function J3(){F1(H1,function(){Z1()&&o2()})}function Z1(){var o=v0;return V2=v0=!1,o}function o2(){var o,t,n;do for(;0<g2.length;)for(o=g2,g2=[],n=o.length,t=0;t<n;++t){var a=o[t];a[0].apply(null,a[1])}while(0<g2.length);V2=v0=!0}function p0(){var o=D1;D1=[],o.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=b2.slice(0),n=t.length;n;)t[--n]()}function S2(o){return new H(r2,!1,o)}function W(o,t){var n=S;return function(){var a=Z1(),i=S;try{return b1(n,!0),o.apply(this,arguments)}catch(s){t&&t(s)}finally{b1(i,!1),a&&o2()}}}Y1(H.prototype,{then:g0,_then:function(o,t){d0(this,new l4(null,null,o,t,S))},catch:function(o){if(arguments.length===1)return this.then(null,o);var t=o,n=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?n:S2)(a)}):this.then(null,function(a){return(a&&a.name===t?n:S2)(a)})},finally:function(o){return this.then(function(t){return H.resolve(o()).then(function(){return t})},function(t){return H.resolve(o()).then(function(){return S2(t)})})},timeout:function(o,t){var n=this;return o<1/0?new H(function(a,i){var s=setTimeout(function(){return i(new _.Timeout(t))},o);n.then(a,i).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C1(H.prototype,Symbol.toStringTag,"Dexie.Promise"),H1.env=r4(),Y1(H,{all:function(){var o=k1.apply(null,arguments).map(q2);return new H(function(t,n){o.length===0&&t([]);var a=o.length;o.forEach(function(i,s){return H.resolve(i).then(function(e){o[s]=e,--a||t(o)},n)})})},resolve:function(o){return o instanceof H?o:o&&typeof o.then=="function"?new H(function(t,n){o.then(t,n)}):new H(r2,!0,o)},reject:S2,race:function(){var o=k1.apply(null,arguments).map(q2);return new H(function(t,n){o.map(function(a){return H.resolve(a).then(t,n)})})},PSD:{get:function(){return S},set:function(o){return S=o}},totalEchoes:{get:function(){return _2}},newPSD:V1,usePSD:F1,scheduler:{get:function(){return h2},set:function(o){h2=o}},rejectionMapper:{get:function(){return h0},set:function(o){h0=o}},follow:function(o,t){return new H(function(n,a){return V1(function(i,s){var e=S;e.unhandleds=[],e.onunhandled=s,e.finalize=T1(function(){var l,r=this;l=function(){r.unhandleds.length===0?i():s(r.unhandleds[0])},b2.push(function h(){l(),b2.splice(b2.indexOf(h),1)}),++I1,h2(function(){--I1==0&&p0()},[])},e.finalize),o()},t,n,a)})}}),E1&&(E1.allSettled&&C1(H,"allSettled",function(){var o=k1.apply(null,arguments).map(q2);return new H(function(t){o.length===0&&t([]);var n=o.length,a=new Array(n);o.forEach(function(i,s){return H.resolve(i).then(function(e){return a[s]={status:"fulfilled",value:e}},function(e){return a[s]={status:"rejected",reason:e}}).then(function(){return--n||t(a)})})})}),E1.any&&typeof AggregateError<"u"&&C1(H,"any",function(){var o=k1.apply(null,arguments).map(q2);return new H(function(t,n){o.length===0&&n(new AggregateError([]));var a=o.length,i=new Array(a);o.forEach(function(s,e){return H.resolve(s).then(function(l){return t(l)},function(l){i[e]=l,--a||n(new AggregateError(i))})})})}),E1.withResolvers&&(H.withResolvers=E1.withResolvers));var X={awaits:0,echoes:0,id:0},Z3=0,j2=[],O2=0,_2=0,o6=0;function V1(o,t,n,a){var i=S,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++o6,H1.env,s.env=r0?{Promise:H,PromiseProp:{value:H,configurable:!0,writable:!0},all:H.all,race:H.race,allSettled:H.allSettled,any:H.any,resolve:H.resolve,reject:H.reject}:{},t&&N(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},a=F1(s,o,n,a),s.ref===0&&s.finalize(),a}function t2(){return X.id||(X.id=++Z3),++X.awaits,X.echoes+=e4,X.id}function A1(){return!!X.awaits&&(--X.awaits==0&&(X.id=0),X.echoes=X.awaits*e4,!0)}function q2(o){return X.echoes&&o&&o.constructor===E1?(t2(),o.then(function(t){return A1(),t},function(t){return A1(),Y(t)})):o}function t6(){var o=j2[j2.length-1];j2.pop(),b1(o,!1)}function b1(o,t){var n,a=S;(t?!X.echoes||O2++&&o===S:!O2||--O2&&o===S)||queueMicrotask(t?(function(i){++_2,X.echoes&&--X.echoes!=0||(X.echoes=X.awaits=X.id=0),j2.push(S),b1(i,!0)}).bind(null,o):t6),o!==S&&(S=o,a===H1&&(H1.env=r4()),r0&&(n=H1.env.Promise,t=o.env,(a.global||o.global)&&(Object.defineProperty(A,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function r4(){var o=A.Promise;return r0?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(A,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function F1(o,t,n,a,i){var s=S;try{return b1(o,!0),t(n,a,i)}finally{b1(s,!1)}}function v4(o,t,n,a){return typeof o!="function"?o:function(){var i=S;n&&t2(),b1(t,!0);try{return o.apply(this,arguments)}finally{b1(i,!1),a&&queueMicrotask(A1)}}}function m0(o){Promise===E1&&X.echoes===0?O2===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+h1).indexOf("[native code]")===-1&&(t2=A1=R);var Y=H.reject,K1="\uFFFF",z1="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",h4="String expected.",n2=[],T2="__dbnames",u0="readonly",x0="readwrite";function R1(o,t){return o?t?function(){return o.apply(this,arguments)&&t.apply(this,arguments)}:o:t}var g4={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function P2(o){return typeof o!="string"||/\./.test(o)?function(t){return t}:function(t){return t[o]===void 0&&o in t&&delete(t=_1(t))[o],t}}function w4(){throw _.Type()}function I(o,t){try{var n=d4(o),a=d4(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<o?1:o<t?-1:0;case"binary":return function(i,s){for(var e=i.length,l=s.length,r=e<l?e:l,h=0;h<r;++h)if(i[h]!==s[h])return i[h]<s[h]?-1:1;return e===l?0:e<l?-1:1}(p4(o),p4(t));case"Array":return function(i,s){for(var e=i.length,l=s.length,r=e<l?e:l,h=0;h<r;++h){var d=I(i[h],s[h]);if(d!==0)return d}return e===l?0:e<l?-1:1}(o,t)}}catch{}return NaN}function d4(o){var t=typeof o;return t!="object"?t:ArrayBuffer.isView(o)?"binary":(o=i0(o),o==="ArrayBuffer"?"binary":o)}function p4(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}var m4=(U.prototype._trans=function(o,t,n){var a=this._tx||S.trans,i=this.name,s=m1&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function e(h,d,c){if(!c.schema[i])throw new _.NotFound("Table "+i+" not part of transaction");return t(c.idbtrans,c)}var l=Z1();try{var r=a&&a.db._novip===this.db._novip?a===S.trans?a._promise(o,e,n):V1(function(){return a._promise(o,e,n)},{trans:a,transless:S.transless||S}):function h(d,c,m,v){if(d.idbdb&&(d._state.openComplete||S.letThrough||d._vip)){var w=d._createTransaction(c,m,d._dbSchema);try{w.create(),d._state.PR1398_maxLoop=3}catch(p){return p.name===l0.InvalidState&&d.isOpen()&&0<--d._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),d.close({disableAutoOpen:!1}),d.open().then(function(){return h(d,c,m,v)})):Y(p)}return w._promise(c,function(p,g){return V1(function(){return S.trans=w,v(p,g,w)})}).then(function(p){if(c==="readwrite")try{w.idbtrans.commit()}catch{}return c==="readonly"?p:w._completion.then(function(){return p})})}if(d._state.openComplete)return Y(new _.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return Y(new _.DatabaseClosed);d.open().catch(R)}return d._state.dbReadyPromise.then(function(){return h(d,c,m,v)})}(this.db,o,[this.name],e);return s&&(r._consoleTask=s,r=r.catch(function(h){return console.trace(h),Y(h)})),r}finally{l&&o2()}},U.prototype.get=function(o,t){var n=this;return o&&o.constructor===Object?this.where(o).first(t):o==null?Y(new _.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:o}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},U.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(q(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var t=O(o);if(t.length===1)return this.where(t[0]).equals(o[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(l){if(l.compound&&t.every(function(h){return 0<=l.keyPath.indexOf(h)})){for(var r=0;r<t.length;++r)if(t.indexOf(l.keyPath[r])===-1)return!1;return!0}return!1}).sort(function(l,r){return l.keyPath.length-r.keyPath.length})[0];if(n&&this.db._maxKey!==K1){var s=n.keyPath.slice(0,t.length);return this.where(s).equals(s.map(function(r){return o[r]}))}!n&&m1&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function i(l,r){return I(l,r)===0}var e=t.reduce(function(c,r){var h=c[0],d=c[1],c=a[r],m=o[r];return[h||c,h||!c?R1(d,c&&c.multi?function(v){return v=M1(v,r),q(v)&&v.some(function(w){return i(m,w)})}:function(v){return i(m,M1(v,r))}):d]},[null,null]),s=e[0],e=e[1];return s?this.where(s.name).equals(o[s.keyPath]).filter(e):n?this.filter(e):this.where(t).equals("")},U.prototype.filter=function(o){return this.toCollection().and(o)},U.prototype.count=function(o){return this.toCollection().count(o)},U.prototype.offset=function(o){return this.toCollection().offset(o)},U.prototype.limit=function(o){return this.toCollection().limit(o)},U.prototype.each=function(o){return this.toCollection().each(o)},U.prototype.toArray=function(o){return this.toCollection().toArray(o)},U.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},U.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,q(o)?"[".concat(o.join("+"),"]"):o))},U.prototype.reverse=function(){return this.toCollection().reverse()},U.prototype.mapToClass=function(o){var t,n=this.db,a=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof w4&&(function(r,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=r}j(r,h),r.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}(i,t=o),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return a},o=i);for(var s=new Set,e=o.prototype;e;e=i1(e))Object.getOwnPropertyNames(e).forEach(function(r){return s.add(r)});function l(r){if(!r)return r;var h,d=Object.create(o.prototype);for(h in r)if(!s.has(h))try{d[h]=r[h]}catch{}return d}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),o},U.prototype.defineClass=function(){return this.mapToClass(function(o){N(this,o)})},U.prototype.add=function(o,t){var n=this,a=this.schema.primKey,i=a.auto,s=a.keyPath,e=o;return s&&i&&(e=P2(s)(o)),this._trans("readwrite",function(l){return n.core.mutate({trans:l,type:"add",keys:t!=null?[t]:null,values:[e]})}).then(function(l){return l.numFailures?H.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{c1(o,s,l)}catch{}return l})},U.prototype.update=function(o,t){return typeof o!="object"||q(o)?this.where(":id").equals(o).modify(t):(o=M1(o,this.schema.primKey.keyPath),o===void 0?Y(new _.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(t))},U.prototype.put=function(o,t){var n=this,a=this.schema.primKey,i=a.auto,s=a.keyPath,e=o;return s&&i&&(e=P2(s)(o)),this._trans("readwrite",function(l){return n.core.mutate({trans:l,type:"put",values:[e],keys:t!=null?[t]:null})}).then(function(l){return l.numFailures?H.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{c1(o,s,l)}catch{}return l})},U.prototype.delete=function(o){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[o]})}).then(function(n){return n.numFailures?H.reject(n.failures[0]):void 0})},U.prototype.clear=function(){var o=this;return this._trans("readwrite",function(t){return o.core.mutate({trans:t,type:"deleteRange",range:g4})}).then(function(t){return t.numFailures?H.reject(t.failures[0]):void 0})},U.prototype.bulkGet=function(o){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:o,trans:n}).then(function(a){return a.map(function(i){return t.hook.reading.fire(i)})})})},U.prototype.bulkAdd=function(o,t,n){var a=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(e){var h=a.schema.primKey,l=h.auto,h=h.keyPath;if(h&&i)throw new _.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==o.length)throw new _.InvalidArgument("Arguments objects and keys must have the same length");var r=o.length,h=h&&l?o.map(P2(h)):o;return a.core.mutate({trans:e,type:"add",keys:i,values:h,wantResults:s}).then(function(w){var c=w.numFailures,m=w.results,v=w.lastResult,w=w.failures;if(c===0)return s?m:v;throw new J1("".concat(a.name,".bulkAdd(): ").concat(c," of ").concat(r," operations failed"),w)})})},U.prototype.bulkPut=function(o,t,n){var a=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(e){var h=a.schema.primKey,l=h.auto,h=h.keyPath;if(h&&i)throw new _.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==o.length)throw new _.InvalidArgument("Arguments objects and keys must have the same length");var r=o.length,h=h&&l?o.map(P2(h)):o;return a.core.mutate({trans:e,type:"put",keys:i,values:h,wantResults:s}).then(function(w){var c=w.numFailures,m=w.results,v=w.lastResult,w=w.failures;if(c===0)return s?m:v;throw new J1("".concat(a.name,".bulkPut(): ").concat(c," of ").concat(r," operations failed"),w)})})},U.prototype.bulkUpdate=function(o){var t=this,n=this.core,a=o.map(function(e){return e.key}),i=o.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(e){return n.getMany({trans:e,keys:a,cache:"clone"}).then(function(l){var r=[],h=[];o.forEach(function(c,m){var v=c.key,w=c.changes,p=l[m];if(p){for(var g=0,u=Object.keys(w);g<u.length;g++){var x=u[g],f=w[x];if(x===t.schema.primKey.keyPath){if(I(f,v)!==0)throw new _.Constraint("Cannot update primary key in bulkUpdate()")}else c1(p,x,f)}s.push(m),r.push(v),h.push(p)}});var d=r.length;return n.mutate({trans:e,type:"put",keys:r,values:h,updates:{keys:a,changeSpecs:i}}).then(function(c){var m=c.numFailures,v=c.failures;if(m===0)return d;for(var w=0,p=Object.keys(v);w<p.length;w++){var g,u=p[w],x=s[Number(u)];x!=null&&(g=v[u],delete v[u],v[x]=g)}throw new J1("".concat(t.name,".bulkUpdate(): ").concat(m," of ").concat(d," operations failed"),v)})})})},U.prototype.bulkDelete=function(o){var t=this,n=o.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:o})}).then(function(e){var i=e.numFailures,s=e.lastResult,e=e.failures;if(i===0)return s;throw new J1("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),e)})},U);function U(){}function w2(o){function t(e,l){if(l){for(var r=arguments.length,h=new Array(r-1);--r;)h[r-1]=arguments[r];return n[e].subscribe.apply(null,h),o}if(typeof e=="string")return n[e]}var n={};t.addEventType=s;for(var a=1,i=arguments.length;a<i;++a)s(arguments[a]);return t;function s(e,l,r){if(typeof e!="object"){var h;l=l||G3;var d={subscribers:[],fire:r=r||R,subscribe:function(c){d.subscribers.indexOf(c)===-1&&(d.subscribers.push(c),d.fire=l(d.fire,c))},unsubscribe:function(c){d.subscribers=d.subscribers.filter(function(m){return m!==c}),d.fire=d.subscribers.reduce(l,r)}};return n[e]=t[e]=d}O(h=e).forEach(function(c){var m=h[c];if(q(m))s(c,h[c][0],h[c][1]);else{if(m!=="asap")throw new _.InvalidArgument("Invalid event config");var v=s(c,c2,function(){for(var w=arguments.length,p=new Array(w);w--;)p[w]=arguments[w];v.subscribers.forEach(function(g){Z0(function(){g.apply(null,p)})})})}})}}function d2(o,t){return Q1(t).from({prototype:o}),t}function a2(o,t){return!(o.filter||o.algorithm||o.or)&&(t?o.justLimit:!o.replayFilter)}function f0(o,t){o.filter=R1(o.filter,t)}function M0(o,t,n){var a=o.replayFilter;o.replayFilter=a?function(){return R1(a(),t())}:t,o.justLimit=n&&!a}function E2(o,t){if(o.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(o.index);if(!n)throw new _.Schema("KeyPath "+o.index+" on object store "+t.name+" is not indexed");return n}function u4(o,t,n){var a=E2(o,t.schema);return t.openCursor({trans:n,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:a,range:o.range}})}function D2(o,t,n,a){var i=o.replayFilter?R1(o.filter,o.replayFilter()):o.filter;if(o.or){var s={},e=function(l,r,h){var d,c;i&&!i(r,h,function(m){return r.stop(m)},function(m){return r.fail(m)})||((c=""+(d=r.primaryKey))=="[object ArrayBuffer]"&&(c=""+new Uint8Array(d)),s1(s,c)||(s[c]=!0,t(l,r,h)))};return Promise.all([o.or._iterate(e,n),x4(u4(o,a,n),o.algorithm,e,!o.keysOnly&&o.valueMapper)])}return x4(u4(o,a,n),R1(o.algorithm,i),t,!o.keysOnly&&o.valueMapper)}function x4(o,t,n,a){var i=W(a?function(s,e,l){return n(a(s),e,l)}:n);return o.then(function(s){if(s)return s.start(function(){var e=function(){return s.continue()};t&&!t(s,function(l){return e=l},function(l){s.stop(l),e=R},function(l){s.fail(l),e=R})||i(s.value,s,function(l){return e=l}),e()})})}var p2=(f4.prototype.execute=function(o){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(q(n))return K(K([],q(o)?o:[],!0),n,!0).sort();if(typeof n=="number")return(Number(o)||0)+n;if(typeof n=="bigint")try{return BigInt(o)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var a=t.remove;if(q(a))return q(o)?o.filter(function(i){return!a.includes(i)}).sort():[];if(typeof a=="number")return Number(o)-a;if(typeof a=="bigint")try{return BigInt(o)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof o=="string"&&o.startsWith(n)?t.replacePrefix[1]+o.substring(n.length):o},f4);function f4(o){this["@@propmod"]=o}var n6=(F.prototype._read=function(o,t){var n=this._ctx;return n.error?n.table._trans(null,Y.bind(null,n.error)):n.table._trans("readonly",o).then(t)},F.prototype._write=function(o){var t=this._ctx;return t.error?t.table._trans(null,Y.bind(null,t.error)):t.table._trans("readwrite",o,"locked")},F.prototype._addAlgorithm=function(o){var t=this._ctx;t.algorithm=R1(t.algorithm,o)},F.prototype._iterate=function(o,t){return D2(this._ctx,o,t,this._ctx.table.core)},F.prototype.clone=function(o){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return o&&N(n,o),t._ctx=n,t},F.prototype.raw=function(){return this._ctx.valueMapper=null,this},F.prototype.each=function(o){var t=this._ctx;return this._read(function(n){return D2(t,o,n,t.table.core)})},F.prototype.count=function(o){var t=this;return this._read(function(n){var a=t._ctx,i=a.table.core;if(a2(a,!0))return i.count({trans:n,query:{index:E2(a,i.schema),range:a.range}}).then(function(e){return Math.min(e,a.limit)});var s=0;return D2(a,function(){return++s,!1},n,i).then(function(){return s})}).then(o)},F.prototype.sortBy=function(o,t){var n=o.split(".").reverse(),a=n[0],i=n.length-1;function s(r,h){return h?s(r[n[h]],h-1):r[a]}var e=this._ctx.dir==="next"?1:-1;function l(r,h){return I(s(r,i),s(h,i))*e}return this.toArray(function(r){return r.sort(l)}).then(t)},F.prototype.toArray=function(o){var t=this;return this._read(function(n){var a=t._ctx;if(a.dir==="next"&&a2(a,!0)&&0<a.limit){var i=a.valueMapper,s=E2(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:s,range:a.range}}).then(function(l){return l=l.result,i?l.map(i):l})}var e=[];return D2(a,function(l){return e.push(l)},n,a.table.core).then(function(){return e})},o)},F.prototype.offset=function(o){var t=this._ctx;return o<=0||(t.offset+=o,a2(t)?M0(t,function(){var n=o;return function(a,i){return n===0||(n===1?--n:i(function(){a.advance(n),n=0}),!1)}}):M0(t,function(){var n=o;return function(){return--n<0}})),this},F.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),M0(this._ctx,function(){var t=o;return function(n,a,i){return--t<=0&&a(i),0<=t}},!0),this},F.prototype.until=function(o,t){return f0(this._ctx,function(n,a,i){return!o(n.value)||(a(i),t)}),this},F.prototype.first=function(o){return this.limit(1).toArray(function(t){return t[0]}).then(o)},F.prototype.last=function(o){return this.reverse().first(o)},F.prototype.filter=function(o){var t;return f0(this._ctx,function(n){return o(n.value)}),(t=this._ctx).isMatch=R1(t.isMatch,o),this},F.prototype.and=function(o){return this.filter(o)},F.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},F.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},F.prototype.desc=function(){return this.reverse()},F.prototype.eachKey=function(o){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){o(a.key,a)})},F.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},F.prototype.eachPrimaryKey=function(o){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){o(a.primaryKey,a)})},F.prototype.keys=function(o){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,i){n.push(i.key)}).then(function(){return n}).then(o)},F.prototype.primaryKeys=function(o){var t=this._ctx;if(t.dir==="next"&&a2(t,!0)&&0<t.limit)return this._read(function(a){var i=E2(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(a){return a.result}).then(o);t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,i){n.push(i.primaryKey)}).then(function(){return n}).then(o)},F.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},F.prototype.firstKey=function(o){return this.limit(1).keys(function(t){return t[0]}).then(o)},F.prototype.lastKey=function(o){return this.reverse().firstKey(o)},F.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var t={};return f0(this._ctx,function(i){var a=i.primaryKey.toString(),i=s1(t,a);return t[a]=!0,!i}),this},F.prototype.modify=function(o){var t=this,n=this._ctx;return this._write(function(a){var i,s,e;e=typeof o=="function"?o:(i=O(o),s=i.length,function(g){for(var u=!1,x=0;x<s;++x){var f=i[x],M=o[f],k=M1(g,f);M instanceof p2?(c1(g,f,M.execute(k)),u=!0):k!==M&&(c1(g,f,M),u=!0)}return u});var l=n.table.core,c=l.schema.primaryKey,r=c.outbound,h=c.extractKey,d=200,c=t.db._options.modifyChunkSize;c&&(d=typeof c=="object"?c[l.name]||c["*"]||200:c);function m(g,f){var x=f.failures,f=f.numFailures;w+=g-f;for(var M=0,k=O(x);M<k.length;M++){var L=k[M];v.push(x[L])}}var v=[],w=0,p=[];return t.clone().primaryKeys().then(function(g){function u(f){var M=Math.min(d,g.length-f);return l.getMany({trans:a,keys:g.slice(f,f+M),cache:"immutable"}).then(function(k){for(var L=[],z=[],y=r?[]:null,C=[],B=0;B<M;++B){var b=k[B],P={value:_1(b),primKey:g[f+B]};e.call(P,P.value,P)!==!1&&(P.value==null?C.push(g[f+B]):r||I(h(b),h(P.value))===0?(z.push(P.value),r&&y.push(g[f+B])):(C.push(g[f+B]),L.push(P.value)))}return Promise.resolve(0<L.length&&l.mutate({trans:a,type:"add",values:L}).then(function(E){for(var D in E.failures)C.splice(parseInt(D),1);m(L.length,E)})).then(function(){return(0<z.length||x&&typeof o=="object")&&l.mutate({trans:a,type:"put",keys:y,values:z,criteria:x,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<f}).then(function(E){return m(z.length,E)})}).then(function(){return(0<C.length||x&&o===k0)&&l.mutate({trans:a,type:"delete",keys:C,criteria:x,isAdditionalChunk:0<f}).then(function(E){return m(C.length,E)})}).then(function(){return g.length>f+M&&u(f+d)})})}var x=a2(n)&&n.limit===1/0&&(typeof o!="function"||o===k0)&&{index:n.index,range:n.range};return u(0).then(function(){if(0<v.length)throw new C2("Error modifying one or more objects",v,w,p);return g.length})})})},F.prototype.delete=function(){var o=this._ctx,t=o.range;return a2(o)&&(o.isPrimKey||t.type===3)?this._write(function(n){var a=o.table.core.schema.primaryKey,i=t;return o.table.core.count({trans:n,query:{index:a,range:i}}).then(function(s){return o.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var l=e.failures;if(e.lastResult,e.results,e=e.numFailures,e)throw new C2("Could not delete some values",Object.keys(l).map(function(r){return l[r]}),s-e);return s-e})})}):this.modify(k0)},F);function F(){}var k0=function(o,t){return t.value=null};function a6(o,t){return o<t?-1:o===t?0:1}function i6(o,t){return t<o?-1:o===t?0:1}function r1(o,t,n){return o=o instanceof k4?new o.Collection(o):o,o._ctx.error=new(n||TypeError)(t),o}function i2(o){return new o.Collection(o,function(){return M4("")}).limit(0)}function I2(o,t,n,a){var i,s,e,l,r,h,d,c=n.length;if(!n.every(function(w){return typeof w=="string"}))return r1(o,h4);function m(w){i=w==="next"?function(g){return g.toUpperCase()}:function(g){return g.toLowerCase()},s=w==="next"?function(g){return g.toLowerCase()}:function(g){return g.toUpperCase()},e=w==="next"?a6:i6;var p=n.map(function(g){return{lower:s(g),upper:i(g)}}).sort(function(g,u){return e(g.lower,u.lower)});l=p.map(function(g){return g.upper}),r=p.map(function(g){return g.lower}),d=(h=w)==="next"?"":a}m("next"),o=new o.Collection(o,function(){return S1(l[0],r[c-1]+a)}),o._ondirectionchange=function(w){m(w)};var v=0;return o._addAlgorithm(function(w,p,g){var u=w.key;if(typeof u!="string")return!1;var x=s(u);if(t(x,r,v))return!0;for(var f=null,M=v;M<c;++M){var k=function(L,z,y,C,B,b){for(var P=Math.min(L.length,C.length),E=-1,D=0;D<P;++D){var v1=z[D];if(v1!==C[D])return B(L[D],y[D])<0?L.substr(0,D)+y[D]+y.substr(D+1):B(L[D],C[D])<0?L.substr(0,D)+C[D]+y.substr(D+1):0<=E?L.substr(0,E)+z[E]+y.substr(E+1):null;B(L[D],v1)<0&&(E=D)}return P<C.length&&b==="next"?L+y.substr(L.length):P<L.length&&b==="prev"?L.substr(0,y.length):E<0?null:L.substr(0,E)+C[E]+y.substr(E+1)}(u,x,l[M],r[M],e,h);k===null&&f===null?v=M+1:(f===null||0<e(f,k))&&(f=k)}return p(f!==null?function(){w.continue(f+d)}:g),!1}),o}function S1(o,t,n,a){return{type:2,lower:o,upper:t,lowerOpen:n,upperOpen:a}}function M4(o){return{type:1,lower:o,upper:o}}var k4=(Object.defineProperty(J.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),J.prototype.between=function(o,t,n,a){n=n!==!1,a=a===!0;try{return 0<this._cmp(o,t)||this._cmp(o,t)===0&&(n||a)&&(!n||!a)?i2(this):new this.Collection(this,function(){return S1(o,t,!n,!a)})}catch{return r1(this,z1)}},J.prototype.equals=function(o){return o==null?r1(this,z1):new this.Collection(this,function(){return M4(o)})},J.prototype.above=function(o){return o==null?r1(this,z1):new this.Collection(this,function(){return S1(o,void 0,!0)})},J.prototype.aboveOrEqual=function(o){return o==null?r1(this,z1):new this.Collection(this,function(){return S1(o,void 0,!1)})},J.prototype.below=function(o){return o==null?r1(this,z1):new this.Collection(this,function(){return S1(void 0,o,!1,!0)})},J.prototype.belowOrEqual=function(o){return o==null?r1(this,z1):new this.Collection(this,function(){return S1(void 0,o)})},J.prototype.startsWith=function(o){return typeof o!="string"?r1(this,h4):this.between(o,o+K1,!0,!0)},J.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):I2(this,function(t,n){return t.indexOf(n[0])===0},[o],K1)},J.prototype.equalsIgnoreCase=function(o){return I2(this,function(t,n){return t===n[0]},[o],"")},J.prototype.anyOfIgnoreCase=function(){var o=k1.apply(G1,arguments);return o.length===0?i2(this):I2(this,function(t,n){return n.indexOf(t)!==-1},o,"")},J.prototype.startsWithAnyOfIgnoreCase=function(){var o=k1.apply(G1,arguments);return o.length===0?i2(this):I2(this,function(t,n){return n.some(function(a){return t.indexOf(a)===0})},o,K1)},J.prototype.anyOf=function(){var o=this,t=k1.apply(G1,arguments),n=this._cmp;try{t.sort(n)}catch{return r1(this,z1)}if(t.length===0)return i2(this);var a=new this.Collection(this,function(){return S1(t[0],t[t.length-1])});a._ondirectionchange=function(s){n=s==="next"?o._ascending:o._descending,t.sort(n)};var i=0;return a._addAlgorithm(function(s,e,l){for(var r=s.key;0<n(r,t[i]);)if(++i===t.length)return e(l),!1;return n(r,t[i])===0||(e(function(){s.continue(t[i])}),!1)}),a},J.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},J.prototype.noneOf=function(){var o=k1.apply(G1,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return r1(this,z1)}var t=o.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[-1/0,a]]},null);return t.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},J.prototype.inAnyRange=function(u,t){var n=this,a=this._cmp,i=this._ascending,s=this._descending,e=this._min,l=this._max;if(u.length===0)return i2(this);if(!u.every(function(x){return x[0]!==void 0&&x[1]!==void 0&&i(x[0],x[1])<=0}))return r1(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_.InvalidArgument);var r=!t||t.includeLowers!==!1,h=t&&t.includeUppers===!0,d,c=i;function m(x,f){return c(x[0],f[0])}try{(d=u.reduce(function(x,f){for(var M=0,k=x.length;M<k;++M){var L=x[M];if(a(f[0],L[1])<0&&0<a(f[1],L[0])){L[0]=e(L[0],f[0]),L[1]=l(L[1],f[1]);break}}return M===k&&x.push(f),x},[])).sort(m)}catch{return r1(this,z1)}var v=0,w=h?function(x){return 0<i(x,d[v][1])}:function(x){return 0<=i(x,d[v][1])},p=r?function(x){return 0<s(x,d[v][0])}:function(x){return 0<=s(x,d[v][0])},g=w,u=new this.Collection(this,function(){return S1(d[0][0],d[d.length-1][1],!r,!h)});return u._ondirectionchange=function(x){c=x==="next"?(g=w,i):(g=p,s),d.sort(m)},u._addAlgorithm(function(x,f,M){for(var k,L=x.key;g(L);)if(++v===d.length)return f(M),!1;return!w(k=L)&&!p(k)||(n._cmp(L,d[v][1])===0||n._cmp(L,d[v][0])===0||f(function(){c===i?x.continue(d[v][0]):x.continue(d[v][1])}),!1)}),u},J.prototype.startsWithAnyOf=function(){var o=k1.apply(G1,arguments);return o.every(function(t){return typeof t=="string"})?o.length===0?i2(this):this.inAnyRange(o.map(function(t){return[t,t+K1]})):r1(this,"startsWithAnyOf() only works with strings")},J);function J(){}function u1(o){return W(function(t){return m2(t),o(t.target.error),!1})}function m2(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var u2="storagemutated",z0="x-storagemutated-1",j1=w2(null,u2),s6=(x1.prototype._lock=function(){return e2(!S.global),++this._reculock,this._reculock!==1||S.global||(S.lockOwnerFor=this),this},x1.prototype._unlock=function(){if(e2(!S.global),--this._reculock==0)for(S.global||(S.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{F1(o[1],o[0])}catch{}}return this},x1.prototype._locked=function(){return this._reculock&&S.lockOwnerFor!==this},x1.prototype.create=function(o){var t=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(e2(!this.idbtrans),!o&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new _.DatabaseClosed(a);case"MissingAPIError":throw new _.MissingAPI(a.message,a);default:throw new _.OpenFailed(a)}if(!this.active)throw new _.TransactionInactive;return e2(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=W(function(i){m2(i),t._reject(o.error)}),o.onabort=W(function(i){m2(i),t.active&&t._reject(new _.Abort(o.error)),t.active=!1,t.on("abort").fire(i)}),o.oncomplete=W(function(){t.active=!1,t._resolve(),"mutatedParts"in o&&j1.storagemutated.fire(o.mutatedParts)}),this},x1.prototype._promise=function(o,t,n){var a=this;if(o==="readwrite"&&this.mode!=="readwrite")return Y(new _.ReadOnly("Transaction is readonly"));if(!this.active)return Y(new _.TransactionInactive);if(this._locked())return new H(function(s,e){a._blockedFuncs.push([function(){a._promise(o,t,n).then(s,e)},S])});if(n)return V1(function(){var s=new H(function(e,l){a._lock();var r=t(e,l,a);r&&r.then&&r.then(e,l)});return s.finally(function(){return a._unlock()}),s._lib=!0,s});var i=new H(function(s,e){var l=t(s,e,a);l&&l.then&&l.then(s,e)});return i._lib=!0,i},x1.prototype._root=function(){return this.parent?this.parent._root():this},x1.prototype.waitFor=function(o){var t,n=this._root(),a=H.resolve(o);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return a}):(n._waitingFor=a,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=s)}());var i=n._waitingFor;return new H(function(s,e){a.then(function(l){return n._waitingQueue.push(W(s.bind(null,l)))},function(l){return n._waitingQueue.push(W(e.bind(null,l)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},x1.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _.Abort))},x1.prototype.table=function(o){var t=this._memoizedTables||(this._memoizedTables={});if(s1(t,o))return t[o];var n=this.schema[o];if(!n)throw new _.NotFound("Table "+o+" not part of transaction");return n=new this.db.Table(o,n,this),n.core=this.db.core.table(o),t[o]=n},x1);function x1(){}function y0(o,t,n,a,i,s,e){return{name:o,keyPath:t,unique:n,multi:a,auto:i,compound:s,src:(n&&!e?"&":"")+(a?"*":"")+(i?"++":"")+z4(t)}}function z4(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function B0(o,t,n){return{name:o,primKey:t,indexes:n,mappedClass:null,idxByName:(a=function(i){return[i.name,i]},n.reduce(function(i,s,e){return e=a(s,e),e&&(i[e[0]]=e[1]),i},{}))};var a}var x2=function(o){try{return o.only([[]]),x2=function(){return[[]]},[[]]}catch{return x2=function(){return K1},K1}};function L0(o){return o==null?function(){}:typeof o=="string"?(t=o).split(".").length===1?function(n){return n[t]}:function(n){return M1(n,t)}:function(n){return M1(n,o)};var t}function y4(o){return[].slice.call(o)}var e6=0;function f2(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function l6(o,t,r){function a(g){if(g.type===3)return null;if(g.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=g.lower,w=g.upper,p=g.lowerOpen,g=g.upperOpen;return v===void 0?w===void 0?null:t.upperBound(w,!!g):w===void 0?t.lowerBound(v,!!p):t.bound(v,w,!!p,!!g)}function i(m){var v,w=m.name;return{name:w,schema:m,mutate:function(p){var g=p.trans,u=p.type,x=p.keys,f=p.values,M=p.range;return new Promise(function(k,L){k=W(k);var z=g.objectStore(w),y=z.keyPath==null,C=u==="put"||u==="add";if(!C&&u!=="delete"&&u!=="deleteRange")throw new Error("Invalid operation type: "+u);var B,b=(x||f||{length:1}).length;if(x&&f&&x.length!==f.length)throw new Error("Given keys array must have same length as given values array.");if(b===0)return k({numFailures:0,failures:{},results:[],lastResult:void 0});function P(n1){++v1,m2(n1)}var E=[],D=[],v1=0;if(u==="deleteRange"){if(M.type===4)return k({numFailures:v1,failures:D,results:[],lastResult:void 0});M.type===3?E.push(B=z.clear()):E.push(B=z.delete(a(M)))}else{var y=C?y?[f,x]:[f,null]:[x,null],T=y[0],o1=y[1];if(C)for(var t1=0;t1<b;++t1)E.push(B=o1&&o1[t1]!==void 0?z[u](T[t1],o1[t1]):z[u](T[t1])),B.onerror=P;else for(t1=0;t1<b;++t1)E.push(B=z[u](T[t1])),B.onerror=P}function Z2(n1){n1=n1.target.result,E.forEach(function(W1,R0){return W1.error!=null&&(D[R0]=W1.error)}),k({numFailures:v1,failures:D,results:u==="delete"?x:E.map(function(W1){return W1.result}),lastResult:n1})}B.onerror=function(n1){P(n1),Z2(n1)},B.onsuccess=Z2})},getMany:function(p){var g=p.trans,u=p.keys;return new Promise(function(x,f){x=W(x);for(var M,k=g.objectStore(w),L=u.length,z=new Array(L),y=0,C=0,B=function(E){E=E.target,z[E._pos]=E.result,++C===y&&x(z)},b=u1(f),P=0;P<L;++P)u[P]!=null&&((M=k.get(u[P]))._pos=P,M.onsuccess=B,M.onerror=b,++y);y===0&&x(z)})},get:function(p){var g=p.trans,u=p.key;return new Promise(function(x,f){x=W(x);var M=g.objectStore(w).get(u);M.onsuccess=function(k){return x(k.target.result)},M.onerror=u1(f)})},query:(v=h,function(p){return new Promise(function(g,u){g=W(g);var x,f,M,y=p.trans,k=p.values,L=p.limit,B=p.query,z=L===1/0?void 0:L,C=B.index,B=B.range,y=y.objectStore(w),C=C.isPrimaryKey?y:y.index(C.name),B=a(B);if(L===0)return g({result:[]});v?((z=k?C.getAll(B,z):C.getAllKeys(B,z)).onsuccess=function(b){return g({result:b.target.result})},z.onerror=u1(u)):(x=0,f=!k&&"openKeyCursor"in C?C.openKeyCursor(B):C.openCursor(B),M=[],f.onsuccess=function(b){var P=f.result;return P?(M.push(k?P.value:P.primaryKey),++x===L?g({result:M}):void P.continue()):g({result:M})},f.onerror=u1(u))})}),openCursor:function(p){var g=p.trans,u=p.values,x=p.query,f=p.reverse,M=p.unique;return new Promise(function(k,L){k=W(k);var C=x.index,z=x.range,y=g.objectStore(w),y=C.isPrimaryKey?y:y.index(C.name),C=f?M?"prevunique":"prev":M?"nextunique":"next",B=!u&&"openKeyCursor"in y?y.openKeyCursor(a(z),C):y.openCursor(a(z),C);B.onerror=u1(L),B.onsuccess=W(function(b){var P,E,D,v1,T=B.result;T?(T.___id=++e6,T.done=!1,P=T.continue.bind(T),E=(E=T.continuePrimaryKey)&&E.bind(T),D=T.advance.bind(T),v1=function(){throw new Error("Cursor not stopped")},T.trans=g,T.stop=T.continue=T.continuePrimaryKey=T.advance=function(){throw new Error("Cursor not started")},T.fail=W(L),T.next=function(){var o1=this,t1=1;return this.start(function(){return t1--?o1.continue():o1.stop()}).then(function(){return o1})},T.start=function(o1){function t1(){if(B.result)try{o1()}catch(n1){T.fail(n1)}else T.done=!0,T.start=function(){throw new Error("Cursor behind last entry")},T.stop()}var Z2=new Promise(function(n1,W1){n1=W(n1),B.onerror=u1(W1),T.fail=W1,T.stop=function(R0){T.stop=T.continue=T.continuePrimaryKey=T.advance=v1,n1(R0)}});return B.onsuccess=W(function(n1){B.onsuccess=t1,t1()}),T.continue=P,T.continuePrimaryKey=E,T.advance=D,t1(),Z2},k(T)):k(null)},L)})},count:function(p){var g=p.query,u=p.trans,x=g.index,f=g.range;return new Promise(function(M,k){var L=u.objectStore(w),z=x.isPrimaryKey?L:L.index(x.name),L=a(f),z=L?z.count(L):z.count();z.onsuccess=W(function(y){return M(y.target.result)}),z.onerror=u1(k)})}}}var s,e,l,d=(e=r,l=y4((s=o).objectStoreNames),{schema:{name:s.name,tables:l.map(function(m){return e.objectStore(m)}).map(function(m){var v=m.keyPath,g=m.autoIncrement,w=q(v),p={},g={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v==null,compound:w,keyPath:v,autoIncrement:g,unique:!0,extractKey:L0(v)},indexes:y4(m.indexNames).map(function(u){return m.index(u)}).map(function(M){var x=M.name,f=M.unique,k=M.multiEntry,M=M.keyPath,k={name:x,compound:q(M),keyPath:M,unique:f,multiEntry:k,extractKey:L0(M)};return p[f2(M)]=k}),getIndexByKeyPath:function(u){return p[f2(u)]}};return p[":id"]=g.primaryKey,v!=null&&(p[f2(v)]=g.primaryKey),g})},hasGetAll:0<l.length&&"getAll"in e.objectStore(l[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),r=d.schema,h=d.hasGetAll,d=r.tables.map(i),c={};return d.forEach(function(m){return c[m.name]=m}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(m){if(!c[m])throw new Error("Table '".concat(m,"' not found"));return c[m]},MIN_KEY:-1/0,MAX_KEY:x2(t),schema:r}}function c6(o,t,n,a){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=l6(t,i,a),o.dbcore.reduce(function(s,e){return e=e.create,V(V({},s),e(s))},a))}}function F2(o,a){var n=a.db,a=c6(o._middlewares,n,o._deps,a);o.core=a.dbcore,o.tables.forEach(function(i){var s=i.name;o.core.schema.tables.some(function(e){return e.name===s})&&(i.core=o.core.table(s),o[s]instanceof o.Table&&(o[s].core=i.core))})}function K2(o,t,n,a){n.forEach(function(i){var s=a[i];t.forEach(function(e){var l=function r(h,d){return D3(h,d)||(h=i1(h))&&r(h,d)}(e,i);(!l||"value"in l&&l.value===void 0)&&(e===o.Transaction.prototype||e instanceof o.Transaction?C1(e,i,{get:function(){return this.table(i)},set:function(r){X0(this,i,{value:r,writable:!0,configurable:!0,enumerable:!0})}}):e[i]=new o.Table(i,s))})})}function C0(o,t){t.forEach(function(n){for(var a in n)n[a]instanceof o.Table&&delete n[a]})}function r6(o,t){return o._cfg.version-t._cfg.version}function v6(o,t,n,a){var i=o._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=B0("$meta",L4("")[0],[]),o._storeNames.push("$meta"));var s=o._createTransaction("readwrite",o._storeNames,i);s.create(n),s._completion.catch(a);var e=s._reject.bind(s),l=S.transless||S;V1(function(){return S.trans=s,S.transless=l,t!==0?(F2(o,n),h=t,((r=s).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(d){return d!=null?d:h}):H.resolve(h)).then(function(d){return m=d,v=s,w=n,p=[],d=(c=o)._versions,g=c._dbSchema=N2(0,c.idbdb,w),(d=d.filter(function(u){return u._cfg.version>=m})).length!==0?(d.forEach(function(u){p.push(function(){var x=g,f=u._cfg.dbschema;U2(c,x,w),U2(c,f,w),g=c._dbSchema=f;var M=H0(x,f);M.add.forEach(function(C){V0(w,C[0],C[1].primKey,C[1].indexes)}),M.change.forEach(function(C){if(C.recreate)throw new _.Upgrade("Not yet support for changing primary key");var B=w.objectStore(C.name);C.add.forEach(function(b){return R2(B,b)}),C.change.forEach(function(b){B.deleteIndex(b.name),R2(B,b)}),C.del.forEach(function(b){return B.deleteIndex(b)})});var k=u._cfg.contentUpgrade;if(k&&u._cfg.version>m){F2(c,w),v._memoizedTables={};var L=o4(f);M.del.forEach(function(C){L[C]=x[C]}),C0(c,[c.Transaction.prototype]),K2(c,[c.Transaction.prototype],O(L),L),v.schema=L;var z,y=e0(k);return y&&t2(),M=H.follow(function(){var C;(z=k(v))&&y&&(C=A1.bind(null,null),z.then(C,C))}),z&&typeof z.then=="function"?H.resolve(z):M.then(function(){return z})}}),p.push(function(x){var f,M,k=u._cfg.dbschema;f=k,M=x,[].slice.call(M.db.objectStoreNames).forEach(function(L){return f[L]==null&&M.db.deleteObjectStore(L)}),C0(c,[c.Transaction.prototype]),K2(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),v.schema=c._dbSchema}),p.push(function(x){c.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(c.idbdb.version/10)===u._cfg.version?(c.idbdb.deleteObjectStore("$meta"),delete c._dbSchema.$meta,c._storeNames=c._storeNames.filter(function(f){return f!=="$meta"})):x.objectStore("$meta").put(u._cfg.version,"version"))})}),function u(){return p.length?H.resolve(p.shift()(v.idbtrans)).then(u):H.resolve()}().then(function(){B4(g,w)})):H.resolve();var c,m,v,w,p,g}).catch(e)):(O(i).forEach(function(d){V0(n,d,i[d].primKey,i[d].indexes)}),F2(o,n),void H.follow(function(){return o.on.populate.fire(s)}).catch(e));var r,h})}function h6(o,t){B4(o._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=N2(0,o.idbdb,t);U2(o,o._dbSchema,t);for(var a=0,i=H0(n,o._dbSchema).change;a<i.length;a++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var l=t.objectStore(e.name);e.add.forEach(function(r){m1&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(r.src)),R2(l,r)})}(i[a]);if(typeof s=="object")return s.value}}function H0(o,t){var n,a={del:[],add:[],change:[]};for(n in o)t[n]||a.del.push(n);for(n in t){var i=o[n],s=t[n];if(i){var e={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)e.recreate=!0,a.change.push(e);else{var l=i.idxByName,r=s.idxByName,h=void 0;for(h in l)r[h]||e.del.push(h);for(h in r){var d=l[h],c=r[h];d?d.src!==c.src&&e.change.push(c):e.add.push(c)}(0<e.del.length||0<e.add.length||0<e.change.length)&&a.change.push(e)}}else a.add.push([n,s])}return a}function V0(o,t,n,a){var i=o.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(s){return R2(i,s)}),i}function B4(o,t){O(o).forEach(function(n){t.db.objectStoreNames.contains(n)||(m1&&console.debug("Dexie: Creating missing table",n),V0(t,n,o[n].primKey,o[n].indexes))})}function R2(o,t){o.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function N2(o,t,n){var a={};return L2(t.objectStoreNames,0).forEach(function(i){for(var s=n.objectStore(i),e=y0(z4(h=s.keyPath),h||"",!0,!1,!!s.autoIncrement,h&&typeof h!="string",!0),l=[],r=0;r<s.indexNames.length;++r){var d=s.index(s.indexNames[r]),h=d.keyPath,d=y0(d.name,h,!!d.unique,!!d.multiEntry,!1,h&&typeof h!="string",!1);l.push(d)}a[i]=B0(i,e,l)}),a}function U2(o,t,n){for(var a=n.db.objectStoreNames,i=0;i<a.length;++i){var s=a[i],e=n.objectStore(s);o._hasGetAll="getAll"in e;for(var l=0;l<e.indexNames.length;++l){var r=e.indexNames[l],h=e.index(r).keyPath,d=typeof h=="string"?h:"["+L2(h).join("+")+"]";!t[s]||(h=t[s].idxByName[d])&&(h.name=r,delete t[s].idxByName[d],t[s].idxByName[r]=h)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&A.WorkerGlobalScope&&A instanceof A.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function L4(o){return o.split(",").map(function(t,n){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return y0(a,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),q(i),n===0)})}var g6=(W2.prototype._parseStoresSpec=function(o,t){O(o).forEach(function(n){if(o[n]!==null){var a=L4(o[n]),i=a.shift();if(i.unique=!0,i.multi)throw new _.Schema("Primary key cannot be multi-valued");a.forEach(function(s){if(s.auto)throw new _.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new _.Schema("Index must have a name and cannot be an empty string")}),t[n]=B0(n,i,a)}})},W2.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?N(this._cfg.storesSource,n):n;var n=t._versions,a={},i={};return n.forEach(function(s){N(a,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(a,i)}),t._dbSchema=i,C0(t,[t._allTables,t,t.Transaction.prototype]),K2(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],O(i),i),t._storeNames=O(i),this},W2.prototype.upgrade=function(o){return this._cfg.contentUpgrade=c0(this._cfg.contentUpgrade||R,o),this},W2);function W2(){}function A0(o,t){var n=o._dbNamesDB;return n||(n=o._dbNamesDB=new y1(T2,{addons:[],indexedDB:o,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function b0(o){return o&&typeof o.databases=="function"}function S0(o){return V1(function(){return S.letThrough=!0,o()})}function j0(o){return!("from"in o)}var Z=function(o,t){if(!this){var n=new Z;return o&&"d"in o&&N(n,o),n}N(this,arguments.length?{d:1,from:o,to:1<arguments.length?t:o}:{d:0})};function M2(o,t,n){var a=I(t,n);if(!isNaN(a)){if(0<a)throw RangeError();if(j0(o))return N(o,{from:t,to:n,d:1});var i=o.l,a=o.r;if(I(n,o.from)<0)return i?M2(i,t,n):o.l={from:t,to:n,d:1,l:null,r:null},H4(o);if(0<I(t,o.to))return a?M2(a,t,n):o.r={from:t,to:n,d:1,l:null,r:null},H4(o);I(t,o.from)<0&&(o.from=t,o.l=null,o.d=a?a.d+1:1),0<I(n,o.to)&&(o.to=n,o.r=null,o.d=o.l?o.l.d+1:1),n=!o.r,i&&!o.l&&k2(o,i),a&&n&&k2(o,a)}}function k2(o,t){j0(t)||function n(a,r){var s=r.from,e=r.to,l=r.l,r=r.r;M2(a,s,e),l&&n(a,l),r&&n(a,r)}(o,t)}function C4(o,t){var n=$2(t),a=n.next();if(a.done)return!1;for(var i=a.value,s=$2(o),e=s.next(i.from),l=e.value;!a.done&&!e.done;){if(I(l.from,i.to)<=0&&0<=I(l.to,i.from))return!0;I(i.from,l.from)<0?i=(a=n.next(l.from)).value:l=(e=s.next(i.from)).value}return!1}function $2(o){var t=j0(o)?null:{s:0,n:o};return{next:function(n){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&I(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||I(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function H4(o){var t,n,a=(((t=o.r)===null||t===void 0?void 0:t.d)||0)-(((n=o.l)===null||n===void 0?void 0:n.d)||0),i=1<a?"r":a<-1?"l":"";i&&(t=i=="r"?"l":"r",n=V({},o),a=o[i],o.from=a.from,o.to=a.to,o[i]=a[i],n[i]=a[t],(o[t]=n).d=V4(n)),o.d=V4(o)}function V4(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Y2(o,t){return O(t).forEach(function(n){o[n]?k2(o[n],t[n]):o[n]=function a(i){var s,e,l={};for(s in i)s1(i,s)&&(e=i[s],l[s]=!e||typeof e!="object"||n4.has(e.constructor)?e:a(e));return l}(t[n])}),o}function O0(o,t){return o.all||t.all||Object.keys(o).some(function(n){return t[n]&&C4(t[n],o[n])})}Y1(Z.prototype,((h1={add:function(o){return k2(this,o),this},addKey:function(o){return M2(this,o,o),this},addKeys:function(o){var t=this;return o.forEach(function(n){return M2(t,n,n)}),this},hasKey:function(o){var t=$2(this).next(o).value;return t&&I(t.from,o)<=0&&0<=I(t.to,o)}})[s0]=function(){return $2(this)},h1));var N1={},_0={},q0=!1;function Q2(o){Y2(_0,o),q0||(q0=!0,setTimeout(function(){q0=!1,T0(_0,!(_0={}))},0))}function T0(o,t){t===void 0&&(t=!1);var n=new Set;if(o.all)for(var a=0,i=Object.values(N1);a<i.length;a++)A4(e=i[a],o,n,t);else for(var s in o){var e,l=/^idb\:\/\/(.*)\/(.*)\//.exec(s);l&&(s=l[1],l=l[2],(e=N1["idb://".concat(s,"/").concat(l)])&&A4(e,o,n,t))}n.forEach(function(r){return r()})}function A4(o,t,n,a){for(var i=[],s=0,e=Object.entries(o.queries.query);s<e.length;s++){for(var l=e[s],r=l[0],h=[],d=0,c=l[1];d<c.length;d++){var m=c[d];O0(t,m.obsSet)?m.subscribers.forEach(function(g){return n.add(g)}):a&&h.push(m)}a&&i.push([r,h])}if(a)for(var v=0,w=i;v<w.length;v++){var p=w[v],r=p[0],h=p[1];o.queries.query[r]=h}}function w6(o){var t=o._state,n=o._deps.indexedDB;if(t.isBeingOpened||o.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Y(t.dbOpenError):o});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,i=Math.round(10*o.verno),s=!1;function e(){if(t.openCanceller!==a)throw new _.DatabaseClosed("db.open() was cancelled")}function l(){return new H(function(m,v){if(e(),!n)throw new _.MissingAPI;var w=o.name,p=t.autoSchema||!i?n.open(w):n.open(w,i);if(!p)throw new _.MissingAPI;p.onerror=u1(v),p.onblocked=W(o._fireOnBlocked),p.onupgradeneeded=W(function(g){var u;d=p.transaction,t.autoSchema&&!o._options.allowEmptyDB?(p.onerror=m2,d.abort(),p.result.close(),(u=n.deleteDatabase(w)).onsuccess=u.onerror=W(function(){v(new _.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(d.onerror=u1(v),g=g.oldVersion>Math.pow(2,62)?0:g.oldVersion,c=g<1,o.idbdb=p.result,s&&h6(o,d),v6(o,g/10,d,v))},v),p.onsuccess=W(function(){d=null;var g,u,x,f,M,k=o.idbdb=p.result,L=L2(k.objectStoreNames);if(0<L.length)try{var z=k.transaction((f=L).length===1?f[0]:f,"readonly");if(t.autoSchema)u=k,x=z,(g=o).verno=u.version/10,x=g._dbSchema=N2(0,u,x),g._storeNames=L2(u.objectStoreNames,0),K2(g,[g._allTables],O(x),x);else if(U2(o,o._dbSchema,z),((M=H0(N2(0,(M=o).idbdb,z),M._dbSchema)).add.length||M.change.some(function(y){return y.add.length||y.change.length}))&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),k.close(),i=k.version+1,s=!0,m(l());F2(o,z)}catch{}n2.push(o),k.onversionchange=W(function(y){t.vcFired=!0,o.on("versionchange").fire(y)}),k.onclose=W(function(y){o.on("close").fire(y)}),c&&(M=o._deps,z=w,k=M.indexedDB,M=M.IDBKeyRange,b0(k)||z===T2||A0(k,M).put({name:z}).catch(R)),m()},v)}).catch(function(m){switch(m==null?void 0:m.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return H.reject(m)})}var r,h=t.dbReadyResolve,d=null,c=!1;return H.race([a,(typeof navigator>"u"?H.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(m){function v(){return indexedDB.databases().finally(m)}r=setInterval(v,100),v()}).finally(function(){return clearInterval(r)}):Promise.resolve()).then(l)]).then(function(){return e(),t.onReadyBeingFired=[],H.resolve(S0(function(){return o.on.ready.fire(o.vip)})).then(function m(){if(0<t.onReadyBeingFired.length){var v=t.onReadyBeingFired.reduce(c0,R);return t.onReadyBeingFired=[],H.resolve(S0(function(){return v(o.vip)})).then(m)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(m){t.dbOpenError=m;try{d&&d.abort()}catch{}return a===t.openCanceller&&o._close(),Y(m)}).finally(function(){t.openComplete=!0,h()}).then(function(){var m;return c&&(m={},o.tables.forEach(function(v){v.schema.indexes.forEach(function(w){w.name&&(m["idb://".concat(o.name,"/").concat(v.name,"/").concat(w.name)]=new Z(-1/0,[[[]]]))}),m["idb://".concat(o.name,"/").concat(v.name,"/")]=m["idb://".concat(o.name,"/").concat(v.name,"/:dels")]=new Z(-1/0,[[[]]])}),j1(u2).fire(m),T0(m,!0)),o})}function P0(o){function t(s){return o.next(s)}var n=i(t),a=i(function(s){return o.throw(s)});function i(s){return function(r){var l=s(r),r=l.value;return l.done?r:r&&typeof r.then=="function"?r.then(n,a):q(r)?Promise.all(r).then(n,a):n(r)}}return i(t)()}function G2(o,t,n){for(var a=q(o)?o.slice():[o],i=0;i<n;++i)a.push(t);return a}var d6={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return V(V({},o),{table:function(t){var n=o.table(t),a=n.schema,i={},s=[];function e(c,m,v){var w=f2(c),p=i[w]=i[w]||[],g=c==null?0:typeof c=="string"?1:c.length,u=0<m,u=V(V({},v),{name:u?"".concat(w,"(virtual-from:").concat(v.name,")"):v.name,lowLevelIndex:v,isVirtual:u,keyTail:m,keyLength:g,extractKey:L0(c),unique:!u&&v.unique});return p.push(u),u.isPrimaryKey||s.push(u),1<g&&e(g===2?c[0]:c.slice(0,g-1),m+1,v),p.sort(function(x,f){return x.keyTail-f.keyTail}),u}t=e(a.primaryKey.keyPath,0,a.primaryKey),i[":id"]=[t];for(var l=0,r=a.indexes;l<r.length;l++){var h=r[l];e(h.keyPath,0,h)}function d(c){var m,v=c.query.index;return v.isVirtual?V(V({},c),{query:{index:v.lowLevelIndex,range:(m=c.query.range,v=v.keyTail,{type:m.type===1?2:m.type,lower:G2(m.lower,m.lowerOpen?o.MAX_KEY:o.MIN_KEY,v),lowerOpen:!0,upper:G2(m.upper,m.upperOpen?o.MIN_KEY:o.MAX_KEY,v),upperOpen:!0})}}):c}return V(V({},n),{schema:V(V({},a),{primaryKey:t,indexes:s,getIndexByKeyPath:function(c){return(c=i[f2(c)])&&c[0]}}),count:function(c){return n.count(d(c))},query:function(c){return n.query(d(c))},openCursor:function(c){var m=c.query.index,v=m.keyTail,w=m.isVirtual,p=m.keyLength;return w?n.openCursor(d(c)).then(function(u){return u&&g(u)}):n.openCursor(c);function g(u){return Object.create(u,{continue:{value:function(x){x!=null?u.continue(G2(x,c.reverse?o.MAX_KEY:o.MIN_KEY,v)):c.unique?u.continue(u.key.slice(0,p).concat(c.reverse?o.MIN_KEY:o.MAX_KEY,v)):u.continue()}},continuePrimaryKey:{value:function(x,f){u.continuePrimaryKey(G2(x,o.MAX_KEY,v),f)}},primaryKey:{get:function(){return u.primaryKey}},key:{get:function(){var x=u.key;return p===1?x[0]:x.slice(0,p)}},value:{get:function(){return u.value}}})}}})}})}};function E0(o,t,n,a){return n=n||{},a=a||"",O(o).forEach(function(i){var s,e,l;s1(t,i)?(s=o[i],e=t[i],typeof s=="object"&&typeof e=="object"&&s&&e?(l=i0(s))!==i0(e)?n[a+i]=t[i]:l==="Object"?E0(s,e,n,a+i+"."):s!==e&&(n[a+i]=t[i]):s!==e&&(n[a+i]=t[i])):n[a+i]=void 0}),O(t).forEach(function(i){s1(o,i)||(n[a+i]=t[i])}),n}function D0(o,t){return t.type==="delete"?t.keys:t.keys||t.values.map(o.extractKey)}var p6={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return V(V({},o),{table:function(t){var n=o.table(t),a=n.schema.primaryKey;return V(V({},n),{mutate:function(i){var s=S.trans,e=s.table(t).hook,l=e.deleting,r=e.creating,h=e.updating;switch(i.type){case"add":if(r.fire===R)break;return s._promise("readwrite",function(){return d(i)},!0);case"put":if(r.fire===R&&h.fire===R)break;return s._promise("readwrite",function(){return d(i)},!0);case"delete":if(l.fire===R)break;return s._promise("readwrite",function(){return d(i)},!0);case"deleteRange":if(l.fire===R)break;return s._promise("readwrite",function(){return function c(m,v,w){return n.query({trans:m,values:!1,query:{index:a,range:v},limit:w}).then(function(p){var g=p.result;return d({type:"delete",keys:g,trans:m}).then(function(u){return 0<u.numFailures?Promise.reject(u.failures[0]):g.length<w?{failures:[],numFailures:0,lastResult:void 0}:c(m,V(V({},v),{lower:g[g.length-1],lowerOpen:!0}),w)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function d(c){var m,v,w,p=S.trans,g=c.keys||D0(a,c);if(!g)throw new Error("Keys missing");return(c=c.type==="add"||c.type==="put"?V(V({},c),{keys:g}):V({},c)).type!=="delete"&&(c.values=K([],c.values,!0)),c.keys&&(c.keys=K([],c.keys,!0)),m=n,w=g,((v=c).type==="add"?Promise.resolve([]):m.getMany({trans:v.trans,keys:w,cache:"immutable"})).then(function(u){var x=g.map(function(f,M){var k,L,z,y=u[M],C={onerror:null,onsuccess:null};return c.type==="delete"?l.fire.call(C,f,y,p):c.type==="add"||y===void 0?(k=r.fire.call(C,f,c.values[M],p),f==null&&k!=null&&(c.keys[M]=f=k,a.outbound||c1(c.values[M],a.keyPath,f))):(k=E0(y,c.values[M]),(L=h.fire.call(C,k,f,y,p))&&(z=c.values[M],Object.keys(L).forEach(function(B){s1(z,B)?z[B]=L[B]:c1(z,B,L[B])}))),C});return n.mutate(c).then(function(f){for(var M=f.failures,k=f.results,L=f.numFailures,f=f.lastResult,z=0;z<g.length;++z){var y=(k||g)[z],C=x[z];y==null?C.onerror&&C.onerror(M[z]):C.onsuccess&&C.onsuccess(c.type==="put"&&u[z]?c.values[z]:y)}return{failures:M,results:k,numFailures:L,lastResult:f}}).catch(function(f){return x.forEach(function(M){return M.onerror&&M.onerror(f)}),Promise.reject(f)})})}}})}})}};function b4(o,t,n){try{if(!t||t.keys.length<o.length)return null;for(var a=[],i=0,s=0;i<t.keys.length&&s<o.length;++i)I(t.keys[i],o[s])===0&&(a.push(n?_1(t.values[i]):t.values[i]),++s);return a.length===o.length?a:null}catch{return null}}var m6={stack:"dbcore",level:-1,create:function(o){return{table:function(t){var n=o.table(t);return V(V({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var i=b4(a.keys,a.trans._cache,a.cache==="clone");return i?H.resolve(i):n.getMany(a).then(function(s){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?_1(s):s},s})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}};function S4(o,t){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function j4(o,t){switch(o){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var u6={stack:"dbcore",level:0,name:"Observability",create:function(o){var t=o.schema.name,n=new Z(o.MIN_KEY,o.MAX_KEY);return V(V({},o),{transaction:function(a,i,s){if(S.subscr&&i!=="readonly")throw new _.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(S.querier));return o.transaction(a,i,s)},table:function(a){var i=o.table(a),s=i.schema,e=s.primaryKey,c=s.indexes,l=e.extractKey,r=e.outbound,h=e.autoIncrement&&c.filter(function(v){return v.compound&&v.keyPath.includes(e.keyPath)}),d=V(V({},i),{mutate:function(v){function w(B){return B="idb://".concat(t,"/").concat(a,"/").concat(B),f[B]||(f[B]=new Z)}var p,g,u,x=v.trans,f=v.mutatedParts||(v.mutatedParts={}),M=w(""),k=w(":dels"),L=v.type,C=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[D0(e,v).filter(function(B){return B}),v.values]:[],z=C[0],y=C[1],C=v.trans._cache;return q(z)?(M.addKeys(z),(C=L==="delete"||z.length===y.length?b4(z,C):null)||k.addKeys(z),(C||y)&&(p=w,g=C,u=y,s.indexes.forEach(function(B){var b=p(B.name||"");function P(D){return D!=null?B.extractKey(D):null}function E(D){return B.multiEntry&&q(D)?D.forEach(function(v1){return b.addKey(v1)}):b.addKey(D)}(g||u).forEach(function(D,o1){var T=g&&P(g[o1]),o1=u&&P(u[o1]);I(T,o1)!==0&&(T!=null&&E(T),o1!=null&&E(o1))})}))):z?(y={from:(y=z.lower)!==null&&y!==void 0?y:o.MIN_KEY,to:(y=z.upper)!==null&&y!==void 0?y:o.MAX_KEY},k.add(y),M.add(y)):(M.add(n),k.add(n),s.indexes.forEach(function(B){return w(B.name).add(n)})),i.mutate(v).then(function(B){return!z||v.type!=="add"&&v.type!=="put"||(M.addKeys(B.results),h&&h.forEach(function(b){for(var P=v.values.map(function(T){return b.extractKey(T)}),E=b.keyPath.findIndex(function(T){return T===e.keyPath}),D=0,v1=B.results.length;D<v1;++D)P[D][E]=B.results[D];w(b.name).addKeys(P)})),x.mutatedParts=Y2(x.mutatedParts||{},f),B})}}),c=function(w){var p=w.query,w=p.index,p=p.range;return[w,new Z((w=p.lower)!==null&&w!==void 0?w:o.MIN_KEY,(p=p.upper)!==null&&p!==void 0?p:o.MAX_KEY)]},m={get:function(v){return[e,new Z(v.key)]},getMany:function(v){return[e,new Z().addKeys(v.keys)]},count:c,query:c,openCursor:c};return O(m).forEach(function(v){d[v]=function(w){var p=S.subscr,g=!!p,u=S4(S,i)&&j4(v,w)?w.obsSet={}:p;if(g){var x=function(y){return y="idb://".concat(t,"/").concat(a,"/").concat(y),u[y]||(u[y]=new Z)},f=x(""),M=x(":dels"),p=m[v](w),g=p[0],p=p[1];if((v==="query"&&g.isPrimaryKey&&!w.values?M:x(g.name||"")).add(p),!g.isPrimaryKey){if(v!=="count"){var k=v==="query"&&r&&w.values&&i.query(V(V({},w),{values:!1}));return i[v].apply(this,arguments).then(function(y){if(v==="query"){if(r&&w.values)return k.then(function(P){return P=P.result,f.addKeys(P),y});var C=w.values?y.result.map(l):y.result;(w.values?f:M).addKeys(C)}else if(v==="openCursor"){var B=y,b=w.values;return B&&Object.create(B,{key:{get:function(){return M.addKey(B.primaryKey),B.key}},primaryKey:{get:function(){var P=B.primaryKey;return M.addKey(P),P}},value:{get:function(){return b&&f.addKey(B.primaryKey),B.value}}})}return y})}M.add(n)}}return i[v].apply(this,arguments)}}),d}})}};function O4(o,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===a?null:(t=V({},t),q(t.keys)&&(t.keys=t.keys.filter(function(i,s){return!(s in n.failures)})),"values"in t&&q(t.values)&&(t.values=t.values.filter(function(i,s){return!(s in n.failures)})),t)}function I0(o,t){return n=o,((a=t).lower===void 0||(a.lowerOpen?0<I(n,a.lower):0<=I(n,a.lower)))&&(o=o,(t=t).upper===void 0||(t.upperOpen?I(o,t.upper)<0:I(o,t.upper)<=0));var n,a}function _4(o,t,m,a,i,s){if(!m||m.length===0)return o;var e=t.query.index,l=e.multiEntry,r=t.query.range,h=a.schema.primaryKey.extractKey,d=e.extractKey,c=(e.lowLevelIndex||e).extractKey,m=m.reduce(function(v,w){var p=v,g=[];if(w.type==="add"||w.type==="put")for(var u=new Z,x=w.values.length-1;0<=x;--x){var f,M=w.values[x],k=h(M);u.hasKey(k)||(f=d(M),(l&&q(f)?f.some(function(B){return I0(B,r)}):I0(f,r))&&(u.addKey(k),g.push(M)))}switch(w.type){case"add":var L=new Z().addKeys(t.values?v.map(function(b){return h(b)}):v),p=v.concat(t.values?g.filter(function(b){return b=h(b),!L.hasKey(b)&&(L.addKey(b),!0)}):g.map(function(b){return h(b)}).filter(function(b){return!L.hasKey(b)&&(L.addKey(b),!0)}));break;case"put":var z=new Z().addKeys(w.values.map(function(b){return h(b)}));p=v.filter(function(b){return!z.hasKey(t.values?h(b):b)}).concat(t.values?g:g.map(function(b){return h(b)}));break;case"delete":var y=new Z().addKeys(w.keys);p=v.filter(function(b){return!y.hasKey(t.values?h(b):b)});break;case"deleteRange":var C=w.range;p=v.filter(function(b){return!I0(h(b),C)})}return p},o);return m===o?o:(m.sort(function(v,w){return I(c(v),c(w))||I(h(v),h(w))}),t.limit&&t.limit<1/0&&(m.length>t.limit?m.length=t.limit:o.length===t.limit&&m.length<t.limit&&(i.dirty=!0)),s?Object.freeze(m):m)}function q4(o,t){return I(o.lower,t.lower)===0&&I(o.upper,t.upper)===0&&!!o.lowerOpen==!!t.lowerOpen&&!!o.upperOpen==!!t.upperOpen}function x6(o,t){return function(n,a,i,s){if(n===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=I(n,a))===0){if(i&&s)return 0;if(i)return 1;if(s)return-1}return a}(o.lower,t.lower,o.lowerOpen,t.lowerOpen)<=0&&0<=function(n,a,i,s){if(n===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=I(n,a))===0){if(i&&s)return 0;if(i)return-1;if(s)return 1}return a}(o.upper,t.upper,o.upperOpen,t.upperOpen)}function f6(o,t,n,a){o.subscribers.add(n),a.addEventListener("abort",function(){var i,s;o.subscribers.delete(n),o.subscribers.size===0&&(i=o,s=t,setTimeout(function(){i.subscribers.size===0&&q1(s,i)},3e3))})}var M6={stack:"dbcore",level:0,name:"Cache",create:function(o){var t=o.schema.name;return V(V({},o),{transaction:function(n,a,i){var s,e,l=o.transaction(n,a,i);return a==="readwrite"&&(e=(s=new AbortController).signal,i=function(r){return function(){if(s.abort(),a==="readwrite"){for(var h=new Set,d=0,c=n;d<c.length;d++){var m=c[d],v=N1["idb://".concat(t,"/").concat(m)];if(v){var w=o.table(m),p=v.optimisticOps.filter(function(b){return b.trans===l});if(l._explicit&&r&&l.mutatedParts)for(var g=0,u=Object.values(v.queries.query);g<u.length;g++)for(var x=0,f=(L=u[g]).slice();x<f.length;x++)O0((z=f[x]).obsSet,l.mutatedParts)&&(q1(L,z),z.subscribers.forEach(function(b){return h.add(b)}));else if(0<p.length){v.optimisticOps=v.optimisticOps.filter(function(b){return b.trans!==l});for(var M=0,k=Object.values(v.queries.query);M<k.length;M++)for(var L,z,y,C=0,B=(L=k[M]).slice();C<B.length;C++)(z=B[C]).res!=null&&l.mutatedParts&&(r&&!z.dirty?(y=Object.isFrozen(z.res),y=_4(z.res,z.req,p,w,z,y),z.dirty?(q1(L,z),z.subscribers.forEach(function(b){return h.add(b)})):y!==z.res&&(z.res=y,z.promise=H.resolve({result:y}))):(z.dirty&&q1(L,z),z.subscribers.forEach(function(b){return h.add(b)})))}}}h.forEach(function(b){return b()})}}},l.addEventListener("abort",i(!1),{signal:e}),l.addEventListener("error",i(!1),{signal:e}),l.addEventListener("complete",i(!0),{signal:e})),l},table:function(n){var a=o.table(n),i=a.schema.primaryKey;return V(V({},a),{mutate:function(s){var e=S.trans;if(i.outbound||e.db._options.cache==="disabled"||e.explicit||e.idbtrans.mode!=="readwrite")return a.mutate(s);var l=N1["idb://".concat(t,"/").concat(n)];return l?(e=a.mutate(s),s.type!=="add"&&s.type!=="put"||!(50<=s.values.length||D0(i,s).some(function(r){return r==null}))?(l.optimisticOps.push(s),s.mutatedParts&&Q2(s.mutatedParts),e.then(function(r){0<r.numFailures&&(q1(l.optimisticOps,s),(r=O4(0,s,r))&&l.optimisticOps.push(r),s.mutatedParts&&Q2(s.mutatedParts))}),e.catch(function(){q1(l.optimisticOps,s),s.mutatedParts&&Q2(s.mutatedParts)})):e.then(function(r){var h=O4(0,V(V({},s),{values:s.values.map(function(d,c){var m;return r.failures[c]?d:(d=(m=i.keyPath)!==null&&m!==void 0&&m.includes(".")?_1(d):V({},d),c1(d,i.keyPath,r.results[c]),d)})}),r);l.optimisticOps.push(h),queueMicrotask(function(){return s.mutatedParts&&Q2(s.mutatedParts)})}),e):a.mutate(s)},query:function(s){if(!S4(S,a)||!j4("query",s))return a.query(s);var e=((h=S.trans)===null||h===void 0?void 0:h.db._options.cache)==="immutable",c=S,l=c.requery,r=c.signal,h=function(w,p,g,u){var x=N1["idb://".concat(w,"/").concat(p)];if(!x)return[];if(!(p=x.queries[g]))return[null,!1,x,null];var f=p[(u.query?u.query.index.name:null)||""];if(!f)return[null,!1,x,null];switch(g){case"query":var M=f.find(function(k){return k.req.limit===u.limit&&k.req.values===u.values&&q4(k.req.query.range,u.query.range)});return M?[M,!0,x,f]:[f.find(function(k){return("limit"in k.req?k.req.limit:1/0)>=u.limit&&(!u.values||k.req.values)&&x6(k.req.query.range,u.query.range)}),!1,x,f];case"count":return M=f.find(function(k){return q4(k.req.query.range,u.query.range)}),[M,!!M,x,f]}}(t,n,"query",s),d=h[0],c=h[1],m=h[2],v=h[3];return d&&c?d.obsSet=s.obsSet:(c=a.query(s).then(function(w){var p=w.result;if(d&&(d.res=p),e){for(var g=0,u=p.length;g<u;++g)Object.freeze(p[g]);Object.freeze(p)}else w.result=_1(p);return w}).catch(function(w){return v&&d&&q1(v,d),Promise.reject(w)}),d={obsSet:s.obsSet,promise:c,subscribers:new Set,type:"query",req:s,dirty:!1},v?v.push(d):(v=[d],(m=m||(N1["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[s.query.index.name||""]=v)),f6(d,v,l,r),d.promise.then(function(w){return{result:_4(w.result,s,m==null?void 0:m.optimisticOps,a,d,e)}})}})}})}};function X2(o,t){return new Proxy(o,{get:function(n,a,i){return a==="db"?t:Reflect.get(n,a,i)}})}var y1=(Q.prototype.version=function(o){if(isNaN(o)||o<.1)throw new _.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new _.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var t=this._versions,n=t.filter(function(a){return a._cfg.version===o})[0];return n||(n=new this.Version(o),t.push(n),t.sort(r6),n.stores({}),this._state.autoSchema=!1,n)},Q.prototype._whenReady=function(o){var t=this;return this.idbdb&&(this._state.openComplete||S.letThrough||this._vip)?o():new H(function(n,a){if(t._state.openComplete)return a(new _.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new _.DatabaseClosed);t.open().catch(R)}t._state.dbReadyPromise.then(n,a)}).then(o)},Q.prototype.use=function(o){var t=o.stack,n=o.create,a=o.level,i=o.name;return i&&this.unuse({stack:t,name:i}),o=this._middlewares[t]||(this._middlewares[t]=[]),o.push({stack:t,create:n,level:a==null?10:a,name:i}),o.sort(function(s,e){return s.level-e.level}),this},Q.prototype.unuse=function(o){var t=o.stack,n=o.name,a=o.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return a?i.create!==a:!!n&&i.name!==n})),this},Q.prototype.open=function(){var o=this;return F1(H1,function(){return w6(o)})},Q.prototype._close=function(){var o=this._state,t=n2.indexOf(this);if(0<=t&&n2.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new H(function(n){o.dbReadyResolve=n}),o.openCanceller=new H(function(n,a){o.cancelOpen=a}))},Q.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new _.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new _.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Q.prototype.delete=function(o){var t=this;o===void 0&&(o={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new H(function(i,s){function e(){t.close(o);var l=t._deps.indexedDB.deleteDatabase(t.name);l.onsuccess=W(function(){var r,h,d;r=t._deps,h=t.name,d=r.indexedDB,r=r.IDBKeyRange,b0(d)||h===T2||A0(d,r).delete(h).catch(R),i()}),l.onerror=u1(s),l.onblocked=t._fireOnBlocked}if(n)throw new _.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(e):e()})},Q.prototype.backendDB=function(){return this.idbdb},Q.prototype.isOpen=function(){return this.idbdb!==null},Q.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Q.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Q.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Q.prototype,"tables",{get:function(){var o=this;return O(this._allTables).map(function(t){return o._allTables[t]})},enumerable:!1,configurable:!0}),Q.prototype.transaction=function(){var o=(function(t,n,a){var i=arguments.length;if(i<2)throw new _.InvalidArgument("Too few arguments");for(var s=new Array(i-1);--i;)s[i-1]=arguments[i];return a=s.pop(),[t,t4(s),a]}).apply(this,arguments);return this._transaction.apply(this,o)},Q.prototype._transaction=function(o,t,n){var a=this,i=S.trans;i&&i.db===this&&o.indexOf("!")===-1||(i=null);var s,e,l=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(e=t.map(function(h){if(h=h instanceof a.Table?h.name:h,typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),o=="r"||o===u0)s=u0;else{if(o!="rw"&&o!=x0)throw new _.InvalidArgument("Invalid transaction mode: "+o);s=x0}if(i){if(i.mode===u0&&s===x0){if(!l)throw new _.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&e.forEach(function(h){if(i&&i.storeNames.indexOf(h)===-1){if(!l)throw new _.SubTransaction("Table "+h+" not included in parent transaction.");i=null}}),l&&i&&!i.active&&(i=null)}}catch(h){return i?i._promise(null,function(d,c){c(h)}):Y(h)}var r=(function h(d,c,m,v,w){return H.resolve().then(function(){var p=S.transless||S,g=d._createTransaction(c,m,d._dbSchema,v);if(g.explicit=!0,p={trans:g,transless:p},v)g.idbtrans=v.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,d._state.PR1398_maxLoop=3}catch(f){return f.name===l0.InvalidState&&d.isOpen()&&0<--d._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),d.close({disableAutoOpen:!1}),d.open().then(function(){return h(d,c,m,null,w)})):Y(f)}var u,x=e0(w);return x&&t2(),p=H.follow(function(){var f;(u=w.call(g,g))&&(x?(f=A1.bind(null,null),u.then(f,f)):typeof u.next=="function"&&typeof u.throw=="function"&&(u=P0(u)))},p),(u&&typeof u.then=="function"?H.resolve(u).then(function(f){return g.active?f:Y(new _.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):p.then(function(){return u})).then(function(f){return v&&g._resolve(),g._completion.then(function(){return f})}).catch(function(f){return g._reject(f),Y(f)})})}).bind(null,this,s,e,i,n);return i?i._promise(s,r,"lock"):S.trans?F1(S.transless,function(){return a._whenReady(r)}):this._whenReady(r)},Q.prototype.table=function(o){if(!s1(this._allTables,o))throw new _.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Q);function Q(o,t){var n=this;this._middlewares={},this.verno=0;var a=Q.dependencies;this._options=t=V({addons:Q.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,s,e,l,r,h={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:R,dbReadyPromise:null,cancelOpen:R,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};h.dbReadyPromise=new H(function(c){h.dbReadyResolve=c}),h.openCanceller=new H(function(c,m){h.cancelOpen=m}),this._state=h,this.name=o,this.on=w2(this,"populate","blocked","versionchange","close",{ready:[c0,R]}),this.on.ready.subscribe=J0(this.on.ready.subscribe,function(c){return function(m,v){Q.vip(function(){var w,p=n._state;p.openComplete?(p.dbOpenError||H.resolve().then(m),v&&c(m)):p.onReadyBeingFired?(p.onReadyBeingFired.push(m),v&&c(m)):(c(m),w=n,v||c(function g(){w.on.ready.unsubscribe(m),w.on.ready.unsubscribe(g)}))})}}),this.Collection=(i=this,d2(n6.prototype,function(u,g){this.db=i;var v=g4,w=null;if(g)try{v=g()}catch(x){w=x}var p=u._ctx,g=p.table,u=g.hook.reading.fire;this._ctx={table:g,index:p.index,isPrimKey:!p.index||g.schema.primKey.keyPath&&p.index===g.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:p.or,valueMapper:u!==c2?u:null}})),this.Table=(s=this,d2(m4.prototype,function(c,m,v){this.db=s,this._tx=v,this.name=c,this.schema=m,this.hook=s._allTables[c]?s._allTables[c].hook:w2(null,{creating:[$3,R],reading:[W3,c2],updating:[Q3,R],deleting:[Y3,R]})})),this.Transaction=(e=this,d2(s6.prototype,function(c,m,v,w,p){var g=this;this.db=e,this.mode=c,this.storeNames=m,this.schema=v,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=w2(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new H(function(u,x){g._resolve=u,g._reject=x}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(u){var x=g.active;return g.active=!1,g.on.error.fire(u),g.parent?g.parent._reject(u):x&&g.idbtrans&&g.idbtrans.abort(),Y(u)})})),this.Version=(l=this,d2(g6.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(r=this,d2(k4.prototype,function(c,m,v){if(this.db=r,this._ctx={table:c,index:m===":id"?null:m,or:v},this._cmp=this._ascending=I,this._descending=function(w,p){return I(p,w)},this._max=function(w,p){return 0<I(w,p)?w:p},this._min=function(w,p){return I(w,p)<0?w:p},this._IDBKeyRange=r._deps.IDBKeyRange,!this._IDBKeyRange)throw new _.MissingAPI})),this.on("versionchange",function(c){0<c.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(c.oldVersion/10))}),this._maxKey=x2(t.IDBKeyRange),this._createTransaction=function(c,m,v,w){return new n.Transaction(c,m,v,n._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(c){n.on("blocked").fire(c),n2.filter(function(m){return m.name===n.name&&m!==n&&!m._state.vcFired}).map(function(m){return m.on("versionchange").fire(c)})},this.use(m6),this.use(M6),this.use(u6),this.use(d6),this.use(p6);var d=new Proxy(this,{get:function(c,m,v){if(m==="_vip")return!0;if(m==="table")return function(p){return X2(n.table(p),d)};var w=Reflect.get(c,m,v);return w instanceof m4?X2(w,d):m==="tables"?w.map(function(p){return X2(p,d)}):m==="_createTransaction"?function(){return X2(w.apply(this,arguments),d)}:w}});this.vip=d,a.forEach(function(c){return c(n)})}var J2,h1=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",k6=(F0.prototype.subscribe=function(o,t,n){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:t,complete:n})},F0.prototype[h1]=function(){return this},F0);function F0(o){this._subscribe=o}try{J2={indexedDB:A.indexedDB||A.mozIndexedDB||A.webkitIndexedDB||A.msIndexedDB,IDBKeyRange:A.IDBKeyRange||A.webkitIDBKeyRange}}catch{J2={indexedDB:null,IDBKeyRange:null}}function T4(o){var t,n=!1,a=new k6(function(i){var s=e0(o),e,l=!1,r={},h={},d={get closed(){return l},unsubscribe:function(){l||(l=!0,e&&e.abort(),c&&j1.storagemutated.unsubscribe(v))}};i.start&&i.start(d);var c=!1,m=function(){return m0(w)},v=function(p){Y2(r,p),O0(h,r)&&m()},w=function(){var p,g,u;!l&&J2.indexedDB&&(r={},p={},e&&e.abort(),e=new AbortController,u=function(x){var f=Z1();try{s&&t2();var M=V1(o,x);return M=s?M.finally(A1):M}finally{f&&o2()}}(g={subscr:p,signal:e.signal,requery:m,querier:o,trans:null}),Promise.resolve(u).then(function(x){n=!0,t=x,l||g.signal.aborted||(r={},function(f){for(var M in f)if(s1(f,M))return;return 1}(h=p)||c||(j1(u2,v),c=!0),m0(function(){return!l&&i.next&&i.next(x)}))},function(x){n=!1,["DatabaseClosedError","AbortError"].includes(x==null?void 0:x.name)||l||m0(function(){l||i.error&&i.error(x)})}))};return setTimeout(m,0),d});return a.hasValue=function(){return n},a.getValue=function(){return t},a}var U1=y1;function K0(o){var t=O1;try{O1=!0,j1.storagemutated.fire(o),T0(o,!0)}finally{O1=t}}Y1(U1,V(V({},H2),{delete:function(o){return new U1(o,{addons:[]}).delete()},exists:function(o){return new U1(o,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return t=U1.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(b0(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(i){return i.name}).filter(function(i){return i!==T2})}):A0(n,t).toCollection().primaryKeys()).then(o)}catch{return Y(new _.MissingAPI)}var t,n},defineClass:function(){return function(o){N(this,o)}},ignoreTransaction:function(o){return S.trans?F1(S.transless,o):o()},vip:S0,async:function(o){return function(){try{var t=P0(o.apply(this,arguments));return t&&typeof t.then=="function"?t:H.resolve(t)}catch(n){return Y(n)}}},spawn:function(o,t,n){try{var a=P0(o.apply(n,t||[]));return a&&typeof a.then=="function"?a:H.resolve(a)}catch(i){return Y(i)}},currentTransaction:{get:function(){return S.trans||null}},waitFor:function(o,t){return t=H.resolve(typeof o=="function"?U1.ignoreTransaction(o):o).timeout(t||6e4),S.trans?S.trans.waitFor(t):t},Promise:H,debug:{get:function(){return m1},set:function(o){s4(o)}},derive:Q1,extend:N,props:Y1,override:J0,Events:w2,on:j1,liveQuery:T4,extendObservabilitySet:Y2,getByKeyPath:M1,setByKeyPath:c1,delByKeyPath:function(o,t){typeof t=="string"?c1(o,t,void 0):"length"in t&&[].map.call(t,function(n){c1(o,n,void 0)})},shallowClone:o4,deepClone:_1,getObjectDiff:E0,cmp:I,asap:Z0,minKey:-1/0,addons:[],connections:n2,errnames:l0,dependencies:J2,cache:N1,semVer:"4.0.11",version:"4.0.11".split(".").map(function(o){return parseInt(o)}).reduce(function(o,t,n){return o+t/Math.pow(10,2*n)})})),U1.maxKey=x2(U1.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(j1(u2,function(o){O1||(o=new CustomEvent(z0,{detail:o}),O1=!0,dispatchEvent(o),O1=!1)}),addEventListener(z0,function(o){o=o.detail,O1||K0(o)}));var s2,O1=!1,P4=function(){};return typeof BroadcastChannel<"u"&&((P4=function(){(s2=new BroadcastChannel(z0)).onmessage=function(o){return o.data&&K0(o.data)}})(),typeof s2.unref=="function"&&s2.unref(),j1(u2,function(o){O1||s2.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!y1.disableBfCache&&o.persisted){m1&&console.debug("Dexie: handling persisted pagehide"),s2!=null&&s2.close();for(var t=0,n=n2;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!y1.disableBfCache&&o.persisted&&(m1&&console.debug("Dexie: handling persisted pageshow"),P4(),K0({all:new Z(-1/0,[[]])}))})),H.rejectionMapper=function(o,t){return!o||o instanceof X1||o instanceof TypeError||o instanceof SyntaxError||!o.name||!i4[o.name]?o:(t=new i4[o.name](t||o.message,o),"stack"in o&&C1(t,"stack",{get:function(){return this.inner.stack}}),t)},s4(m1),V(y1,Object.freeze({__proto__:null,Dexie:y1,liveQuery:T4,Entity:w4,cmp:I,PropModification:p2,replacePrefix:function(o,t){return new p2({replacePrefix:[o,t]})},add:function(o){return new p2({add:o})},remove:function(o){return new p2({remove:o})},default:y1,RangeSet:Z,mergeRanges:k2,rangesOverlap:C4}),{default:y1}),y1})});var W0,B6=function(){if(typeof window>"u")return new Map;if(!W0){var j=window;j.Ionicons=j.Ionicons||{},W0=j.Ionicons.map=j.Ionicons.map||new Map}return W0},$0=function(j){Object.keys(j).forEach(function(V){V3(V,j[V]);var K=V.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();V!==K&&V3(K,j[V])})},V3=function(j,V){var K=B6(),A=K.get(j);A===void 0?K.set(j,V):A!==V&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(j,'". Ensure that multiple icons are not mapped to the same icon name.'))};var A3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var b3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='44' d='M358.62 129.28L86.49 402.08 70 442l39.92-16.49 272.8-272.13-24.1-24.1zM413.07 74.84l-11.79 11.78 24.1 24.1 11.79-11.79a16.51 16.51 0 000-23.34l-.75-.75a16.51 16.51 0 00-23.35 0z' class='ionicon-fill-none'/></svg>";var S3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>";var j3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z' class='ionicon-fill-none'/><path d='M432 96h-96V72a40 40 0 00-40-40h-80a40 40 0 00-40 40v24H80a16 16 0 000 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 000-32zM192.57 416H192a16 16 0 01-16-15.43l-8-224a16 16 0 1132-1.14l8 224A16 16 0 01192.57 416zM272 400a16 16 0 01-32 0V176a16 16 0 0132 0zm32-304h-96V72a7.91 7.91 0 018-8h80a7.91 7.91 0 018 8zm32 304.57A16 16 0 01320 416h-.58A16 16 0 01304 399.43l8-224a16 16 0 1132 1.14z'/></svg>";var L1=function(j){return j[j.All=0]="All",j[j.Pending=1]="Pending",j[j.Completed=2]="Completed",j}(L1||{});var o0=y6(O3(),1),_3=Symbol.for("Dexie"),t0=globalThis[_3]||(globalThis[_3]=o0.default);if(o0.default.semVer!==t0.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${o0.default.semVer} and ${t0.semVer}`);var{liveQuery:P6,mergeRanges:E6,rangesOverlap:D6,RangeSet:I6,cmp:F6,Entity:K6,PropModification:R6,replacePrefix:N6,add:U6,remove:W6}=t0;var q3=t0;var G0=class extends q3{constructor(){super("TaskDatabase"),this.version(1).stores({tasks:"++id, title, description, completed"})}},n0=new G0,T3=j=>B1(void 0,null,function*(){return yield n0.tasks.add(j)}),B2=()=>B1(void 0,null,function*(){return yield n0.tasks.toArray()}),P3=(j,V)=>B1(void 0,null,function*(){return yield n0.tasks.update(j,V)}),E3=j=>B1(void 0,null,function*(){yield n0.tasks.delete(j)});var L6=["searchbar"];function C6(j,V){if(j&1){let K=y2();$(0,"ion-item-sliding")(1,"ion-item",11)(2,"ion-label",19),w1("click",function(){let O=e1(K).$implicit,q=f1();return l1(q.openViewTaskModal(O))}),d1(3),G(),$(4,"ion-checkbox",20),U4("ngModelChange",function(O){let q=e1(K).$implicit;return N4(q.completed,O)||(q.completed=O),l1(O)}),w1("ionChange",function(){e1(K);let O=f1();return l1(O.updateTasks())}),G()(),$(5,"ion-item-options",21)(6,"ion-item-option",22),w1("click",function(){let O=e1(K).$implicit,q=f1();return l1(q.openEditTaskModalWithArgument(O))}),$1(7,"ion-icon",23),G(),$(8,"ion-item-option",24),w1("click",function(){let O=e1(K).$implicit,q=f1();return l1(q.deleteTask(O.id||-1))}),$1(9,"ion-icon",25),G()()()}if(j&2){let K=V.$implicit;a1(3),U0(K.title),a1(),R4("ngModel",K.completed)}}function H6(j,V){j&1&&($(0,"ion-item",11)(1,"ion-label"),d1(2,"N\xE3o h\xE1 tarefas aqui! "),G()())}function V6(j,V){j&1&&($(0,"ion-note",32),d1(1," O t\xEDtulo \xE9 obrigat\xF3rio. "),G())}function A6(j,V){if(j&1&&($(0,"ion-button",33),d1(1," Salvar "),G()),j&2){let K=f1(2);g1("disabled",K.newTaskForm.invalid)}}function b6(j,V){if(j&1){let K=y2();$(0,"ion-button",34),w1("click",function(){e1(K);let O=f1(2);return l1(O.openEditTaskModal())}),d1(1," Editar "),G()}}function S6(j,V){if(j&1){let K=y2();$(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-title"),d1(3),G(),$(4,"ion-buttons",3)(5,"ion-button",4),w1("click",function(){e1(K);let O=f1();return l1(O.closeNewTaskModal())}),d1(6," Cancelar "),G()()()(),$(7,"ion-content",11)(8,"form",26),w1("ngSubmit",function(){e1(K);let O=f1();return l1(O.onSubmit())}),$1(9,"ion-input",27),z2(10,V6,2,0,"ion-note",28),$1(11,"ion-textarea",29),z2(12,A6,2,1,"ion-button",30)(13,b6,2,0,"ion-button",31),G()()}if(j&2){let K,A=f1();a1(3),U0(A.getTaskModalTitle()),a1(5),g1("formGroup",A.newTaskForm),a1(),g1("readonly",A.taskModalType.toString()=="View"),a1(),g1("ngIf",((K=A.newTaskForm.get("title"))==null?null:K.invalid)&&((K=A.newTaskForm.get("title"))==null?null:K.touched)),a1(),g1("readonly",A.taskModalType.toString()=="View"),a1(),g1("ngIf",A.taskModalType.toString()!="View"),a1(),g1("ngIf",A.taskModalType.toString()=="View")}}var p1=function(j){return j.New="New",j.Edit="Edit",j.View="View",j}(p1||{}),l8=(()=>{let V=class V{constructor(A){this.formBuilder=A,this.searching=!1,this.isTaskModalOpen=!1,this.taskModalType=p1.New,this.count_id=0,this.tasks=[],this.filteredTasks=this.tasks.map(O=>({target:O})),this.taskFilter=L1.All,this.newTaskForm=A.group({id:[void 0],title:["",Q4.required],description:[""],completed:[!1]}),$0({add:A3,search:S3,trash:j3,pencil:b3}),this.initializeDB()}initializeDB(){return B1(this,null,function*(){this.tasks=yield B2(),this.updateTasks()})}searchTasks(A){var q,N;let O=((N=(q=this.searchbar)==null?void 0:q.value)==null?void 0:N.toLocaleLowerCase())||"";return A.filter(i1=>i1.title.toLocaleLowerCase().trim().indexOf(O)!=-1||i1.description.toLocaleLowerCase().trim().indexOf(O)!=-1)}filterTasksStatus(A){switch(this.taskFilter){case L1.All:return A;case L1.Pending:return A.filter(O=>!O.completed);case L1.Completed:return A.filter(O=>O.completed)}}updateTasks(){this.filteredTasks=this.searchTasks(this.filterTasksStatus(this.tasks)).map(A=>({target:A})),this.filteredTasks.forEach(A=>{this.tasks.forEach(O=>{console.clear(),console.table(this.tasks),console.table(this.getFilteredTasks())})})}deleteTask(A){return B1(this,null,function*(){yield E3(A),this.tasks=yield B2(),this.updateTasks()})}setTaskFilter(A){if(typeof A=="string")switch(A){case"completed":A=L1.Completed;break;case"pending":A=L1.Pending;break;case"all":default:A=L1.All;break}this.taskFilter=A,this.updateTasks()}tasksIsEmpty(){return this.getFilteredTasks().length===0}getFilteredTasks(){return this.filteredTasks.map(A=>A.target)}onSubmit(){return B1(this,null,function*(){switch(this.isTaskModalOpen=!1,this.taskModalType){case p1.New:let A=this.newTaskForm.value;delete A.id,yield T3(A),this.tasks=yield B2();break;case p1.Edit:let O=this.newTaskForm.value;yield P3(this.newTaskForm.value.id,O),this.tasks=yield B2();break}this.updateTasks(),this.newTaskForm.reset()})}getTaskModalTitle(){switch(this.taskModalType){case p1.View:return"Visualizar Tarefa";case p1.Edit:return"Editar Tarefa";case p1.New:return"Nova Tarefa"}}openNewTaskModal(){this.taskModalType!=p1.New&&this.newTaskForm.reset(),this.taskModalType=p1.New,this.isTaskModalOpen=!0}openViewTaskModal(A){this.taskModalType=p1.View,this.newTaskForm.setValue(A),this.isTaskModalOpen=!0}openEditTaskModal(){this.taskModalType=p1.Edit,this.isTaskModalOpen=!0}openEditTaskModalWithArgument(A){this.taskModalType=p1.Edit,this.newTaskForm.setValue(A),this.isTaskModalOpen=!0}closeNewTaskModal(){this.isTaskModalOpen=!1}openSearch(){this.searching=!0,setTimeout(()=>this.searchbar.setFocus(),200)}closeSearch(){this.searching=!1,this.searchbar.value=""}};V.\u0275fac=function(O){return new(O||V)(E4(n3))},V.\u0275cmp=D4({type:V,selectors:[["app-home"]],viewQuery:function(O,q){if(O&1&&I4(L6,5),O&2){let N;F4(N=K4())&&(q.searchbar=N.first)}},decls:27,vars:8,consts:[["searchbar",""],[3,"translucent"],["color","primary"],["slot","end"],[3,"click"],["name","search"],["color","light","showCancelButton","",3,"ionBlur","ionInput"],["value","all",3,"ionChange"],["value","all"],["value","pending"],["value","completed"],["color","light"],[1,"ion-no-padding"],[4,"ngFor","ngForOf"],["color","light",4,"ngIf"],["horizontal","end","vertical","bottom","slot","fixed"],["color","primary",3,"click"],["name","add","size","large"],[3,"isOpen"],[1,"full-height",3,"click"],["slot","start","color","primary",3,"ngModelChange","ionChange","ngModel"],["side","end"],["color","medium",3,"click"],["name","pencil","size","large"],["color","danger",3,"click"],["name","trash","size","large"],[1,"ion-padding",3,"ngSubmit","formGroup"],["fill","solid","label","T\xEDtulo","labelPlacement","floating","color","primary","name","title","formControlName","title",3,"readonly"],["color","danger",4,"ngIf"],["fill","solid","rows","12","color","primary","name","description","label","Descri\xE7\xE3o","labelPlacement","floating","formControlName","description",1,"ion-margin-bottom","ion-margin-top",3,"readonly"],["expand","block","color","success","type","submit",3,"disabled",4,"ngIf"],["expand","block","color","primary","type","button",3,"click",4,"ngIf"],["color","danger"],["expand","block","color","success","type","submit",3,"disabled"],["expand","block","color","primary","type","button",3,"click"]],template:function(O,q){if(O&1){let N=y2();$(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-title"),d1(3,"Tarefas"),G(),$(4,"ion-buttons",3)(5,"ion-button",4),w1("click",function(){return e1(N),l1(q.openSearch())}),$1(6,"ion-icon",5),G()()(),$(7,"ion-toolbar",2)(8,"ion-searchbar",6,0),w1("ionBlur",function(){return e1(N),l1(q.closeSearch())})("ionInput",function(){return e1(N),l1(q.updateTasks())}),G()(),$(10,"ion-toolbar",2)(11,"ion-segment",7),w1("ionChange",function(a0){return e1(N),l1(q.setTaskFilter(a0.detail.value))}),$(12,"ion-segment-button",8),d1(13,"Todas"),G(),$(14,"ion-segment-button",9),d1(15,"Pedentes"),G(),$(16,"ion-segment-button",10),d1(17,"Conclu\xEDdas"),G()()()(),$(18,"ion-content",11)(19,"ion-list",12),z2(20,C6,10,2,"ion-item-sliding",13)(21,H6,3,0,"ion-item",14),G(),$(22,"ion-fab",15)(23,"ion-fab-button",16),w1("click",function(){return e1(N),l1(q.openNewTaskModal())}),$1(24,"ion-icon",17),G()(),$(25,"ion-modal",18),z2(26,S6,14,7,"ng-template"),G()()}O&2&&(g1("translucent",!0),a1(),N0("ion-hide",q.searching),a1(6),N0("ion-hide",!q.searching),a1(13),g1("ngForOf",q.getFilteredTasks()),a1(),g1("ngIf",q.tasksIsEmpty()),a1(4),g1("isOpen",q.isTaskModalOpen))},dependencies:[w3,d3,p3,L3,x3,i3,Z4,G4,X4,o3,t3,H3,B3,s3,v3,r3,a3,J4,z3,y3,l3,e3,Y4,W4,$4,m3,g3,u3,f3,C3,h3,k3,M3,c3],styles:["form[_ngcontent-%COMP%]   :is(ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]){--background: #5551}.full-height[_ngcontent-%COMP%]{height:100%;margin:0;display:flex;align-items:center}"]});let j=V;return j})();export{l8 as HomePage};
